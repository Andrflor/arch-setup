!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2);class o{constructor(){this.nvim=i.workspace.nvim,this.highlightCommands=[]}createMarkerID(){return o.maxMarkerID+=1,o.maxMarkerID}hlLinkGroupCommand(e,t){const n=`CocExplorer${e}`;return{group:n,command:`highlight default link ${n} ${t}`,markerID:this.createMarkerID()}}hlGroupCommand(e,t){const n=`CocExplorer${e}`;return{group:n,command:`highlight default ${n} ${t}`,markerID:this.createMarkerID()}}register(e){Array.isArray(e)?this.highlightCommands.push(...e):"group"in e&&"string"==typeof e.group?this.highlightCommands.push(e):this.register(Object.values(e))}async registerHighlightSyntax(e=!1){await r.execNotifyBlock(async()=>{this.nvim.call("coc_explorer#register_syntax_highlights",[this.highlightCommands],!0)},e)}}o.maxMarkerID=0,t.hlGroupManager=new o},function(e,t){e.exports=require("coc.nvim")},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=r(n(11));i(n(42)),i(n(43)),i(n(44)),i(n(45)),i(n(46)),i(n(47)),i(n(48)),i(n(63)),i(n(25)),i(n(64)),i(n(34)),i(n(33)),t.outputChannel=o.workspace.createOutputChannel("explorer"),t.prettyPrint=function(e){o.workspace.showMessage(s.default.inspect(e))}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),r=n(36);t.fileColumnManager=new class extends r.BaseColumnManager{}(i.config.get("file.columns"))},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=[];let o=null;const s=(e,t)=>{if(o){if("info"!==e){const n="warn"===e?"warning":e;i.workspace.showMessage(t.toString(),n)}o[e](t)}};t.log=(e,t)=>{o?s(e,t):r.push({type:e,data:t})},t.registerLogger=e=>{o=e;for(const e of r)s(e.type,e.data)},t.onError=e=>{t.log("error",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(68),o=n(6),s=n(24),a=n(2),c=n(69),u=n(0);t.enableNerdfont=a.config.get("icon.enableNerdfont"),t.sourceIcons={expanded:a.config.get("icon.expanded")||(t.enableNerdfont?"":"-"),shrinked:a.config.get("icon.shrinked")||(t.enableNerdfont?"":"+"),selected:a.config.get("icon.selected"),unselected:a.config.get("icon.unselected")};const l=u.hlGroupManager.hlLinkGroupCommand.bind(u.hlGroupManager),d={line:l("HelpLine","Operator"),mappingKey:l("HelpMappingKey","PreProc"),action:l("HelpAction","Identifier"),arg:l("HelpArg","Identifier"),description:l("HelpDescription","Comment")};u.hlGroupManager.register(d);t.ExplorerSource=class{constructor(){this.startLine=0,this.endLine=0,this.items=[],this.lines=[],this.selectedItems=new Set,this.relativeHlRanges={},this.actions={},this.rootActions={},this.hlIds=[],this.nvim=i.workspace.nvim,this.bindedExplorer=!1,this.addAction("normal",async(e,t)=>{await this.nvim.command("normal "+t)},"execute vim normal mode commands",{multi:!1}),this.addAction("quit",async()=>{await this.explorer.quit()},"quit explorer",{multi:!1}),this.addAction("refresh",async e=>{const t=e?e[0]:null;await this.reload(t)},"refresh",{multi:!1}),this.addAction("help",async e=>{await this.renderHelp(null===e)},"show help",{multi:!1}),this.addAction("actionMenu",async e=>{await this.actionMenu(e)},"show actions in coc-list"),this.addItemAction("select",async e=>{this.selectedItems.add(e),await this.render()},"toggle item selection",{multi:!1,select:!0}),this.addItemAction("unselect",async e=>{this.selectedItems.delete(e),await this.render()},"toggle item selection",{multi:!1,select:!0}),this.addItemAction("toggleSelection",async e=>{this.selectedItems.has(e)?await this.doAction("unselect",e):await this.doAction("select",e),await this.render()},"toggle item selection",{multi:!1,select:!0}),this.addAction("gotoSource",async(e,t)=>{const n=this.explorer.sources.find(e=>e.name===t);n&&await n.gotoLineIndex(0)},"go to source"),this.addAction("sourceNext",async()=>{const e=this.explorer.sources.findIndex(e=>e===this),t=this.explorer.sources[e+1];t?await t.gotoLineIndex(0):await a.enableWrapscan()&&await this.explorer.sources[0].gotoLineIndex(0)},"go to next source"),this.addAction("sourcePrev",async()=>{const e=this.explorer.sources.findIndex(e=>e===this),t=this.explorer.sources[e-1];t?await t.gotoLineIndex(0):await a.enableWrapscan()&&await this.explorer.sources[this.explorer.sources.length-1].gotoLineIndex(0)},"go to previous source"),this.addAction("diagnosticPrev",async e=>{const t=e?e[0]:null;if(this instanceof f.FileSource){const e=this.lines.findIndex(([,e])=>e===t),n=a.findLast(this.diagnosisLineIndexes,t=>t<e);void 0!==n&&await this.gotoLineIndex(n)}const n=this.explorer.sources.findIndex(e=>e===this),i=a.findLast(this.explorer.sources.slice(0,n),e=>e instanceof f.FileSource&&e.diagnosisLineIndexes.length>0);if(i){const e=i.diagnosisLineIndexes[i.diagnosisLineIndexes.length-1];void 0!==e&&await i.gotoLineIndex(e)}},"go to previous diagnostic"),this.addAction("diagnosticNext",async e=>{const t=e?e[0]:null;if(this instanceof f.FileSource){const e=this.lines.findIndex(([,e])=>e===t),n=this.diagnosisLineIndexes.find(t=>t>e);if(void 0!==n)return void await this.gotoLineIndex(n)}const n=this.explorer.sources.findIndex(e=>e===this),i=this.explorer.sources.slice(n+1).find(e=>e instanceof f.FileSource&&e.diagnosisLineIndexes.length>0);if(i){const e=i.diagnosisLineIndexes[0];void 0!==e&&await i.gotoLineIndex(e)}},"go to next diagnostic"),this.addAction("gitPrev",async e=>{const t=e?e[0]:null;if(this instanceof f.FileSource){const e=this.lines.findIndex(([,e])=>e===t),n=a.findLast(this.gitChangedLineIndexes,t=>t<e);if(void 0!==n)return void await this.gotoLineIndex(n)}const n=this.explorer.sources.findIndex(e=>e===this),i=a.findLast(this.explorer.sources.slice(0,n),e=>e instanceof f.FileSource&&e.gitChangedLineIndexes.length>0);if(i){const e=i.gitChangedLineIndexes[i.gitChangedLineIndexes.length-1];void 0!==e&&await i.gotoLineIndex(e)}},"go to previous git changed"),this.addAction("gitNext",async e=>{const t=e?e[0]:null;if(this instanceof f.FileSource){const e=this.lines.findIndex(([,e])=>e===t),n=this.gitChangedLineIndexes.find(t=>t>e);if(void 0!==n)return void await this.gotoLineIndex(n)}const n=this.explorer.sources.findIndex(e=>e===this),i=this.explorer.sources.slice(n+1).find(e=>e instanceof f.FileSource&&e.gitChangedLineIndexes.length>0);if(i){const e=i.gitChangedLineIndexes[0];void 0!==e&&await i.gotoLineIndex(e)}},"go to next git changed")}bindExplorer(e,t){this.bindedExplorer||(this.bindedExplorer=!0,this._explorer=e,this._expanded=t,Promise.resolve(this.init()).catch(o.onError))}get explorer(){if(void 0!==this._explorer)return this._explorer;throw new Error(`source(${this.name}) unbound to explorer`)}async prevWinnr(){const e=await this.nvim.call("bufwinnr",[this.explorer.previousBufnr]);return await this.explorer.winnr!==e&&e>0?e:null}get expanded(){if(void 0!==this._expanded)return this._expanded;throw new Error(`source(${this.name}) unbound to explorer`)}set expanded(e){this._expanded=e}init(){}addAction(e,t,n,i={}){this.rootActions[e]={callback:e=>t(null,e),description:n,options:i},this.actions[e]={callback:t,description:n,options:i}}addRootAction(e,t,n,i={}){this.rootActions[e]={callback:t,options:i,description:n}}addItemsAction(e,t,n,i={}){this.actions[e]={callback:t,description:n,options:i}}addItemAction(e,t,n,i={}){this.actions[e]={callback:async(e,n)=>{for(const i of e)await t(i,n)},description:n,options:i}}async doRootAction(e,t=""){const n=this.rootActions[e];if(!n)return;const{render:i=!1,reload:r=!1}=n.options;await n.callback(t),i&&await this.render(),r&&await this.reload(null)}async doAction(e,t,n=""){const i=this.actions[e];if(!i)return;const{multi:r=!0,render:o=!1,reload:s=!1,select:a=!1}=i.options,c=Array.isArray(t)?t:[t];if(a)await i.callback(c,n);else if(r)if(this.selectedItems.size>0){const e=Array.from(this.selectedItems);this.selectedItems.clear(),await i.callback(e,n)}else await i.callback(c,n);else await i.callback([c[0]],n);o&&await this.render(),s&&await this.reload(null)}async copy(e){await this.nvim.call("setreg",["+",e]),await this.nvim.call("setreg",['"',e])}async actionMenu(e){const t=null===e?this.rootActions:this.actions;r.explorerActionList.setExplorerActions(Object.entries(t).map(([t,{callback:n,description:i}])=>({name:t,items:e,mappings:s.mappings,root:null===e,key:s.reverseMappings[t],description:i,callback:n})).filter(e=>"actionMenu"!==e.name));const n=i.listManager.registerList(r.explorerActionList);await i.listManager.start(["--normal","--number-select",r.explorerActionList.name]),n.dispose()}isSelectedAny(){return 0!==this.selectedItems.size}isSelectedItem(e){return this.selectedItems.has(e)}getItemByIndex(e){const t=this.lines[e];return t?t[1]:null}async gotoLineIndex(e,t,n=!1){await a.execNotifyBlock(async()=>{const n=void 0===t?await this.explorer.currentCol():t,r=await this.explorer.win;r&&(e>=this.lines.length&&(e=this.lines.length-1),r.setCursor([this.startLine+e+1,n-1],!0),i.workspace.env.isVim&&this.nvim.command("redraw",!0))},n)}async gotoRoot({col:e,notify:t=!1}={}){const n=void 0===e?await this.explorer.currentCol():e;await this.gotoLineIndex(0,n,t)}async gotoItem(e,{lineIndex:t,col:n,notify:i=!1}={}){if(null===e)return void await this.gotoRoot({col:n,notify:i});const r=void 0===n?await this.explorer.currentCol():n,o=this.lines.findIndex(([,t])=>null!==t&&t.uid===e.uid);-1!==o?await this.gotoLineIndex(o,r,i):void 0!==t?await this.gotoLineIndex(t,r,i):await this.gotoRoot({col:r,notify:i})}async loaded(e){}opened(e=!1){}async reload(e,{render:t=!0,notify:n=!1}={}){this.selectedItems=new Set,this.items=await this.loadItems(e),await this.loaded(e),t&&await this.render({notify:n})}async render({notify:e=!1,storeCursor:t=!0}={}){if(this.explorer.isHelpUI)return;const{nvim:n}=this;let r=null;t&&(r=await this.explorer.storeCursor()),await a.execNotifyBlock(async()=>{const e=new c.SourceViewBuilder;await this.draw(e),this.lines=e.lines,await this.partRender(!0),r&&await r(!0),i.workspace.env.isVim&&n.command("redraw",!0)},e)}async partRender(e=!1){await a.execNotifyBlock(async()=>{const e=this.explorer.sources.indexOf(this),t=this.explorer.sources.length-1==e;await this.explorer.setLines(this.lines.map(([e])=>e),this.startLine,t?-1:this.endLine,!0);let n=this.startLine;this.explorer.sources.slice(e).forEach(e=>{e.startLine=n,n+=e.lines.length,e.endLine=n})},e)}async renderHelp(e){this.explorer.isHelpUI=!0;const t=new c.SourceViewBuilder,n=await this.nvim.call("winwidth","%"),r=await this.explorer.storeCursor();t.newItem(null,t=>{t.add(`Help for [${this.name}${e?" root":""}], (use q or <esc> return to explorer)`)}),t.newItem(null,e=>{e.add("—".repeat(n),d.line)});const o=e?this.rootActions:this.actions,u=(e,t)=>{e.add(t.name,d.action),t.arg&&e.add(`(${t.arg})`,d.arg),e.add(" "),e.add(o[t.name].description,d.description)};Object.entries(s.mappings).forEach(([e,n])=>{n.every(e=>e.name in o)&&(t.newItem(null,t=>{t.add(" "),t.add(e,d.mappingKey),t.add(" - "),u(t,n[0])}),n.slice(1).forEach(n=>{t.newItem(null,t=>{t.add(" ".repeat(e.length+4)),u(t,n)})}))}),await a.execNotifyBlock(async()=>{await this.explorer.setLines(t.lines.map(([e])=>e),0,-1,!0)}),await this.explorer.clearMappings();const l=[];await new Promise(e=>{["<esc>","q"].forEach(t=>{l.push(i.workspace.registerLocalKeymap("n",t,()=>{e()},!0))})}),l.forEach(e=>e.dispose()),await this.quitHelp(),await this.explorer.renderAll({storeCursor:!1}),await r()}async quitHelp(){await this.explorer.executeMappings(),this.explorer.isHelpUI=!1}async quitOnOpen(){a.config.get("quitOnOpen")&&await this.explorer.quit()}};const f=n(9)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const r=n(12),o=n(90);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const s=n(22);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(23);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(15);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const u=n(91);t.CancellationTokenSource=u.CancellationTokenSource,t.CancellationToken=u.CancellationToken;const l=n(92);var d,f,h,p,m,g,y;i(n(93)),i(n(95)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(f=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(f=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class v extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,v.prototype)}}function w(e,t,n,i){let s=0,a=0,w=0;const b="2.0";let x,_,C=void 0,E=Object.create(null),M=void 0,k=Object.create(null),R=new l.LinkedMap,S=Object.create(null),O=Object.create(null),I=f.Off,T=h.Text,A=y.New,D=new c.Emitter,P=new c.Emitter,L=new c.Emitter,j=new c.Emitter;function N(e){return"req-"+e.toString()}function q(e,t){var n;o.isRequestMessage(t)?e.set(N(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++w).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function F(e){}function $(){return A===y.Listening}function B(){return A===y.Closed}function G(){return A===y.Disposed}function W(){A!==y.New&&A!==y.Listening||(A=y.Closed,P.fire(void 0))}function H(){x||0===R.size||(x=setImmediate(()=>{x=void 0,function(){if(0===R.size)return;let e=R.shift();try{o.isRequestMessage(e)?function(e){if(G())return;function n(n,i,r){let s={jsonrpc:b,id:e.id};n instanceof o.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,z(s,i,r),t.write(s)}function i(n,i,r){let o={jsonrpc:b,id:e.id,error:n.toJson()};z(o,i,r),t.write(o)}!function(e){if(I===f.Off||!_)return;if(T===h.Text){let t=void 0;I===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),_.log(`Received request '${e.method} - (${e.id})'.`,t)}else K("receive-request",e)}(e);let s,a,c=E[e.method];c&&(s=c.type,a=c.handler);let l=Date.now();if(a||C){let c=new u.CancellationTokenSource,d=String(e.id);O[d]=c;try{let u,f=u=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(c.token):C(e.method,c.token):r.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,c.token):C(e.method,...e.params,c.token):a?a(e.params,c.token):C(e.method,e.params,c.token);u?f.then?f.then(t=>{delete O[d],n(t,e.method,l)},t=>{delete O[d],t instanceof o.ResponseError?i(t,e.method,l):t&&r.string(t.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete O[d],n(u,e.method,l)):(delete O[d],function(n,i,r){void 0===n&&(n=null);let o={jsonrpc:b,id:e.id,result:n};z(o,i,r),t.write(o)}(u,e.method,l))}catch(t){delete O[d],t instanceof o.ResponseError?n(t,e.method,l):t&&r.string(t.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(G())return;let t,i=void 0;if(e.method===d.type.method)t=e=>{let t=e.id,n=O[String(t)];n&&n.cancel()};else{let n=k[e.method];n&&(t=n.handler,i=n.type)}if(t||M)try{!function(e){if(I===f.Off||!_||e.method===m.type.method)return;if(T===h.Text){let t=void 0;I===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),_.log(`Received notification '${e.method}'.`,t)}else K("receive-notification",e)}(e),void 0===e.params||void 0!==i&&0===i.numberOfParams?t?t():M(e.method):r.array(e.params)&&(void 0===i||i.numberOfParams>1)?t?t(...e.params):M(e.method,...e.params):t?t(e.params):M(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else L.fire(e)}(e):o.isResponseMessage(e)?function(e){if(G())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),i=S[t];if(function(e,t){if(I===f.Off||!_)return;if(T===h.Text){let n=void 0;if(I===f.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let i=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";_.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${i}`,n)}else _.log(`Received response ${e.id} without active response promise.`,n)}else K("receive-response",e)}(e,i),i){delete S[t];try{if(e.error){let t=e.error;i.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");i.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${i.method}' failed with message: ${e.message}`):n.error(`Response handler '${i.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(r.string(t.id)||r.number(t.id)){let e=String(t.id),n=S[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{H()}}()}))}e.onClose(W),e.onError((function(e){D.fire([e,void 0,void 0])})),t.onClose(W),t.onError((function(e){D.fire(e)}));let U=e=>{try{if(o.isNotificationMessage(e)&&e.method===d.type.method){let n=N(e.params.id),r=R.get(n);if(o.isRequestMessage(r)){let o=i&&i.cancelUndispatched?i.cancelUndispatched(r,F):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return R.delete(n),o.id=r.id,z(o,e.method,Date.now()),void t.write(o)}}q(R,e)}finally{H()}};function z(e,t,n){if(I!==f.Off&&_)if(T===h.Text){let i=void 0;I===f.Verbose&&(e.error&&e.error.data?i=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?i=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(i="No result returned.\n\n")),_.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,i)}else K("send-response",e)}function K(e,t){if(!_||I===f.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};_.log(n)}function V(){if(B())throw new v(g.Closed,"Connection is closed.");if(G())throw new v(g.Disposed,"Connection is disposed.")}function J(e){return void 0===e?null:e}function Y(e,t){let n,i=e.numberOfParams;switch(i){case 0:n=null;break;case 1:n=J(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<i;e++)n.push(J(t[e]));if(t.length<i)for(let e=t.length;e<i;e++)n.push(null)}return n}let Q={sendNotification:(e,...n)=>{let i,o;if(V(),r.string(e))switch(i=e,n.length){case 0:o=null;break;case 1:o=n[0];break;default:o=n}else i=e.method,o=Y(e,n);let s={jsonrpc:b,method:i,params:o};!function(e){if(I!==f.Off&&_)if(T===h.Text){let t=void 0;I===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),_.log(`Sending notification '${e.method}'.`,t)}else K("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{V(),r.func(e)?M=e:t&&(r.string(e)?k[e]={type:void 0,handler:t}:k[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let i,a;V(),function(){if(!$())throw new Error("Call listen() first.")}();let c=void 0;if(r.string(e))switch(i=e,n.length){case 0:a=null;break;case 1:u.CancellationToken.is(n[0])?(a=null,c=n[0]):a=J(n[0]);break;default:const e=n.length-1;u.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?J(n[0]):n.slice(0,e).map(e=>J(e))):a=n.map(e=>J(e))}else{i=e.method,a=Y(e,n);let t=e.numberOfParams;c=u.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,p=new Promise((e,n)=>{let r={jsonrpc:b,id:l,method:i,params:a},s={method:i,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(I!==f.Off&&_)if(T===h.Text){let t=void 0;I===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),_.log(`Sending request '${e.method} - (${e.id})'.`,t)}else K("send-request",e)}(r);try{t.write(r)}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(S[String(l)]=s)});return c&&c.onCancellationRequested(()=>{Q.sendNotification(d.type,{id:l})}),p},onRequest:(e,t)=>{V(),r.func(e)?C=e:t&&(r.string(e)?E[e]={type:void 0,handler:t}:E[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let i=!1,o=h.Text;void 0!==n&&(r.boolean(n)?i=n:(i=n.sendNotification||!1,o=n.traceFormat||h.Text)),T=o,_=(I=e)===f.Off?void 0:t,!i||B()||G()||Q.sendNotification(p.type,{value:f.toString(e)})},onError:D.event,onClose:P.event,onUnhandledNotification:L.event,onDispose:j.event,dispose:()=>{if(G())return;A=y.Disposed,j.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(S).forEach(e=>{S[e].reject(n)}),S=Object.create(null),O=Object.create(null),R=new l.LinkedMap,r.func(t.dispose)&&t.dispose(),r.func(e.dispose)&&e.dispose()},listen:()=>{V(),function(){if($())throw new v(g.AlreadyListening,"Connection is already listening")}(),A=y.Listening,e.listen(U)},inspect:()=>{console.log("inspect")}};return Q.onNotification(m.type,e=>{I!==f.Off&&_&&_.log(e.message,I===f.Verbose?e.verbose:void 0)}),Q}t.ConnectionError=v,function(e){e.is=function(e){let t=e;return t&&r.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(y||(y={})),t.createMessageConnection=function(e,n,i,r){var o;return i||(i=t.NullLogger),w(void 0!==(o=e).listen&&void 0===o.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),i,r)}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=i(n(5)),s=i(n(3)),a=n(18),c=n(19),u=n(6),l=n(2),d=n(0),f=n(7),h=n(20),p=n(4);n(71);const m=n(87),g=n(35),y=n(107);t.expandStore={record:{},expand(e){this.record[e]=!0},shrink(e){this.record[e]=!1},isExpanded(e){return this.record[e]||!1}};const v=d.hlGroupManager.hlLinkGroupCommand.bind(d.hlGroupManager),w={title:v("FileRoot","Constant"),name:v("FileRootName","Identifier"),expandIcon:v("FileExpandIcon","Direcoty"),fullpath:v("FileFullpath","Comment")};d.hlGroupManager.register(w);class b extends f.ExplorerSource{constructor(){super(...arguments),this.name="file",this.hlSrcId=r.workspace.createNameSpace("coc-explorer-file"),this.hlRevealedLineSrcId=r.workspace.createNameSpace("coc-explorer-file-revealed-line"),this.showHiddenFiles=l.config.get("file.showHiddenFiles"),this.copyItems=new Set,this.cutItems=new Set,this.diagnosisLineIndexes=[],this.gitChangedLineIndexes=[]}async init(){const{nvim:e}=this;await p.fileColumnManager.init(this),l.activeMode&&this.explorer.onDidInit.event(()=>{r.workspace.env.isVim?l.onBufEnter(200,async e=>{e===this.explorer.bufnr&&await this.reload(null)}):(l.autoReveal&&l.onBufEnter(200,async t=>{if(t!==this.explorer.bufnr){const n=await e.call("getbufinfo",[t]);if(n[0]&&n[0].name){const t=await this.revealItemByPath(n[0].name);null!==t&&await l.execNotifyBlock(async()=>{await this.render({storeCursor:!1,notify:!0}),await this.gotoItem(t,{notify:!0}),e.command("redraw",!0)})}}}),r.events.on("BufWritePost",l.debounce(1e3,async t=>{const n=await e.call("getbufinfo",[t]);n[0]&&n[0].name&&(await c.gitManager.reload(s.default.dirname(n[0].name)),await this.render())})),r.events.on(["InsertLeave","TextChanged"],l.debounce(1e3,async()=>{let e=!1;p.fileColumnManager.columns.includes("diagnosticError")&&(a.diagnosticManager.errorReload(this.root),a.diagnosticManager.errorNeedRender&&(e=!0,a.diagnosticManager.errorNeedRender=!1)),p.fileColumnManager.columns.includes("diagnosticWarning")&&(a.diagnosticManager.warningReload(this.root),a.diagnosticManager.warningNeedRender&&(e=!0,a.diagnosticManager.warningNeedRender=!1)),e&&await this.render()})))}),y.initFileActions(this)}opened(e=!1){this.root=s.default.join(this.explorer.rootPath),this.expanded&&t.expandStore.expand(this.root)}getPutTargetDir(e){return null===e?this.root:e.directory&&t.expandStore.isExpanded(e.fullpath)?e.fullpath:e.parent?e.parent.fullpath:this.root}async searchByCocList(e,t){m.filesList.ignore=!this.showHiddenFiles,m.filesList.rootPath=e,m.filesList.recursive=t,m.filesList.revealCallback=async e=>{const t=await this.revealItemByPath(g.URI.parse(e.uri).fsPath);null!==t&&await l.execNotifyBlock(async()=>{await this.render({storeCursor:!1,notify:!0}),await this.gotoItem(t,{notify:!0}),this.nvim.command("redraw",!0)})};const n=r.listManager.registerList(m.filesList);await r.listManager.start([m.filesList.name]),n.dispose()}async revealItemByPath(e,n=this.items){e=l.normalizePath(e);for(const i of n){if(i.directory&&e.startsWith(i.fullpath+s.default.sep))return t.expandStore.expand(i.fullpath),i.children||(i.children=await this.listFiles(i.fullpath,i)),await this.revealItemByPath(e,i.children);if(e===i.fullpath)return i}return null}sortFiles(e){return e.sort((e,t)=>e.directory&&!t.directory?-1:t.directory&&!e.directory?1:e.name.localeCompare(t.name))}async listFiles(e,n){const i=await l.fsReaddir(e),r=await Promise.all(i.map(async i=>{try{const r=s.default.join(e,i),a=await l.fsStat(r).catch(()=>{}),c=await l.fsLstat(r).catch(()=>{}),u=await l.fsAccess(r,o.default.constants.X_OK),d=await l.fsAccess(r,o.default.constants.W_OK),f=await l.fsAccess(r,o.default.constants.R_OK),h={uid:this.name+"-"+r,name:i,level:n?n.level+1:1,fullpath:r,directory:!!a&&a.isDirectory(),readonly:!d&&f,executable:u,readable:f,writable:d,hidden:i.startsWith("."),symbolicLink:!!c&&c.isSymbolicLink(),isFirstInLevel:!1,isLastInLevel:!1,lstat:c||null,parent:n||void 0,data:{}};return t.expandStore.isExpanded(h.fullpath)&&(h.children=await this.listFiles(h.fullpath,h)),h}catch(e){return u.onError(e),null}}));return this.sortFiles(r.filter(e=>null!==e))}async expandRecursiveItems(e){await Promise.all(e.map(async e=>{e.directory&&(t.expandStore.expand(e.fullpath),e.children||(e.children=await this.listFiles(e.fullpath,e)),await this.expandRecursiveItems(e.children))}))}async shrinkRecursiveItems(e){await Promise.all(e.map(async e=>{e.directory&&(t.expandStore.shrink(e.fullpath),e.children&&await this.shrinkRecursiveItems(e.children))}))}async loadItems(e){return this.copyItems.clear(),this.cutItems.clear(),t.expandStore.isExpanded(this.root)?this.listFiles(this.root,null):[]}async loaded(e){await p.fileColumnManager.load(e)}async draw(e){await p.fileColumnManager.beforeDraw();const n=t.expandStore.isExpanded(this.root);e.newRoot(e=>{e.add(n?f.sourceIcons.expanded:f.sourceIcons.shrinked,w.expandIcon),e.add(" "),e.add(`[FILE${this.showHiddenFiles?" I":""}]:`,w.title),e.add(" "),e.add(s.default.basename(this.root),w.name),e.add(" "),e.add(this.root,w.fullpath)});const i=n=>{n.forEach(e=>{e.isFirstInLevel=!1,e.isLastInLevel=!1});const r=this.showHiddenFiles?n:n.filter(e=>!e.hidden);r.length>0&&(r[0].isFirstInLevel=!0,r[r.length-1].isLastInLevel=!0);for(const n of r)e.newItem(n,e=>{p.fileColumnManager.drawItem(e,n)}),t.expandStore.isExpanded(n.fullpath)&&n.children&&i(n.children)};n&&i(this.items)}}t.FileSource=b,h.sourceManager.registerSource(new b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),r=n(36);t.bufferColumnManager=new class extends r.BaseColumnManager{}(i.config.get("buffer.columns"))},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";function i(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every(e=>i(e))}},function(e,t,n){e.exports=p,p.Minimatch=m;var i={sep:"/"};try{i=n(3)}catch(e){}var r=p.GLOBSTAR=m.GLOBSTAR={},o=n(51),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",d="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var f=/\/+/;function h(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function p(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new m(t,n).match(e))}function m(e,t){if(!(this instanceof m))return new m(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function g(e,t){if(t||(t=this instanceof m?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}p.filter=function(e,t){return t=t||{},function(n,i,r){return p(n,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,n=function(n,i,r){return t.minimatch(n,i,h(e,r))};return n.Minimatch=function(n,i){return new t.Minimatch(n,h(e,i))},n},m.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:m},m.prototype.debug=function(){},m.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(f)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},m.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,i=0;if(n.nonegate)return;for(var r=0,o=e.length;r<o&&"!"===e.charAt(r);r++)t=!t,i++;i&&(this.pattern=e.substr(i));this.negate=t},p.braceExpand=function(e,t){return g(e,t)},m.prototype.braceExpand=g,m.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return r;if(""===e)return"";var i,o="",u=!!n.nocase,l=!1,f=[],h=[],p=!1,m=-1,g=-1,v="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",w=this;function b(){if(i){switch(i){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+i}w.debug("clearStateChar %j %j",i,o),i=!1}}for(var x,_=0,C=e.length;_<C&&(x=e.charAt(_));_++)if(this.debug("%s\t%s %s %j",e,_,o,x),l&&d[x])o+="\\"+x,l=!1;else switch(x){case"/":return!1;case"\\":b(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,_,o,x),p){this.debug("  in class"),"!"===x&&_===g+1&&(x="^"),o+=x;continue}w.debug("call clearStateChar %j",i),b(),i=x,n.noext&&b();continue;case"(":if(p){o+="(";continue}if(!i){o+="\\(";continue}f.push({type:i,start:_-1,reStart:o.length,open:s[i].open,close:s[i].close}),o+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,o),i=!1;continue;case")":if(p||!f.length){o+="\\)";continue}b(),u=!0;var E=f.pop();o+=E.close,"!"===E.type&&h.push(E),E.reEnd=o.length;continue;case"|":if(p||!f.length||l){o+="\\|",l=!1;continue}b(),o+="|";continue;case"[":if(b(),p){o+="\\"+x;continue}p=!0,g=_,m=o.length,o+=x;continue;case"]":if(_===g+1||!p){o+="\\"+x,l=!1;continue}if(p){var M=e.substring(g+1,_);try{RegExp("["+M+"]")}catch(e){var k=this.parse(M,y);o=o.substr(0,m)+"\\["+k[0]+"\\]",u=u||k[1],p=!1;continue}}u=!0,p=!1,o+=x;continue;default:b(),l?l=!1:!d[x]||"^"===x&&p||(o+="\\"),o+=x}p&&(M=e.substr(g+1),k=this.parse(M,y),o=o.substr(0,m)+"\\["+k[0],u=u||k[1]);for(E=f.pop();E;E=f.pop()){var R=o.slice(E.reStart+E.open.length);this.debug("setting tail",o,E),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",R,R,E,o);var S="*"===E.type?c:"?"===E.type?a:"\\"+E.type;u=!0,o=o.slice(0,E.reStart)+S+"\\("+R}b(),l&&(o+="\\\\");var O=!1;switch(o.charAt(0)){case".":case"[":case"(":O=!0}for(var I=h.length-1;I>-1;I--){var T=h[I],A=o.slice(0,T.reStart),D=o.slice(T.reStart,T.reEnd-8),P=o.slice(T.reEnd-8,T.reEnd),L=o.slice(T.reEnd);P+=L;var j=A.split("(").length-1,N=L;for(_=0;_<j;_++)N=N.replace(/\)[+*?]?/,"");var q="";""===(L=N)&&t!==y&&(q="$"),o=A+D+L+q+P}""!==o&&u&&(o="(?=.)"+o);O&&(o=v+o);if(t===y)return[o,u];if(!u)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var F=n.nocase?"i":"";try{var $=new RegExp("^"+o+"$",F)}catch(e){return new RegExp("$.")}return $._glob=e,$._src=o,$};var y={};p.makeRe=function(e,t){return new m(e,t||{}).makeRe()},m.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?c:t.dot?u:l,i=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var i=new m(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},m.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/"));e=e.split(f),this.debug(this.pattern,"split",e);var r,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(r=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;if(n.matchBase&&1===a.length&&(c=[r]),this.matchOne(c,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},m.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],d=e[o];if(this.debug(t,l,d),!1===l)return!1;if(l===r){this.debug("GLOBSTAR",[t,l,d]);var f=o,h=s+1;if(h===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!i.dot&&"."===e[o].charAt(0))return!1;return!0}for(;f<a;){var p=e[f];if(this.debug("\nglobstar while",e,f,t,h,p),this.matchOne(e.slice(f),t.slice(h),n))return this.debug("globstar found match!",f,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,f,t,h);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!n||(this.debug("\n>>> no match, partial?",e,f,t,h),f!==a))}if("string"==typeof l?(u=i.nocase?d.toLowerCase()===l.toLowerCase():d===l,this.debug("string match",l,d,u)):(u=d.match(l),this.debug("pattern match",l,d,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,i=0,r=this._callbacks.length;i<r;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0),r=0,o=n.length;r<o;r++)try{t.push(n[r].apply(i[r],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let o;return this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}r._noop=function(){},t.Emitter=r},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";function i(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?r:i,e.exports.posix=i,e.exports.win32=r},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(35),s=i(n(3));t.diagnosticManager=new class{constructor(){this.errorNeedRender=!1,this.warningNeedRender=!1,this.errorPathCount={},this.warningPathCount={},this.errorMixedCount={},this.warningMixedCount={},this.lastReloadTime=0}reload(){const e=Date.now();if(e-this.lastReloadTime<300)return;this.lastReloadTime=e;const t={},n={};r.diagnosticManager.getDiagnosticList().forEach(e=>{const i=e.location.uri,r=o.URI.parse(i).fsPath;"Error"===e.severity?(r in t||(t[r]=0),t[r]+=1):(r in n||(n[r]=0),n[r]+=1)}),JSON.stringify(t)!==JSON.stringify(this.errorPathCount)&&(this.errorPathCount=t,this.errorNeedRender=!0),JSON.stringify(n)!==JSON.stringify(this.warningPathCount)&&(this.warningPathCount=n,this.warningNeedRender=!0)}errorReload(e){this.reload(),this.errorNeedRender&&(this.errorMixedCount={},Object.entries(this.errorPathCount).forEach(([t,n])=>{const i=s.default.relative(e,t).split(s.default.sep);for(let t=1;t<=i.length;t++){const r=s.default.join(e,i.slice(0,t).join(s.default.sep));this.errorMixedCount[r]?this.errorMixedCount[r]+=n:this.errorMixedCount[r]=n}}))}warningReload(e){this.reload(),this.warningNeedRender&&(this.warningMixedCount={},Object.entries(this.warningPathCount).forEach(([t,n])=>{const i=s.default.relative(e,t).split(s.default.sep);for(let t=1;t<=i.length;t++){const r=s.default.join(e,i.slice(0,t).join(s.default.sep));this.warningMixedCount[r]?this.warningMixedCount[r]+=n:this.warningMixedCount[r]=n}}))}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(3)),o=n(6),s=n(4),a=n(2),c=s.fileColumnManager.getColumnConfig("git.showIgnored");var u;!function(e){e.mixed="*",e.unmodified=" ",e.modified="M",e.added="A",e.deleted="D",e.renamed="R",e.copied="C",e.unmerged="U",e.untracked="?",e.ignored="!"}(u=t.GitFormat||(t.GitFormat={}));class l{spawn(e,{cwd:t}={}){return a.execCli(a.config.get("git.command"),e,{cwd:t})}async getRoot(e){return(await this.spawn(["rev-parse","--show-toplevel"],{cwd:e})).trim()}parseStatusFormat(e){for(const t in u){const n=Reflect.get(u,t);if(e===n)return n}return u.unmodified}parsePath(e,t){let n=t,i="",r=!1,o=!1,s=!1;for(;n<e.length;){const t=e[n];if(r||o){if(o)if(s)i+="t"===t?"\t":t,s=!1;else{if('"'===t)return[n+1,i];"\\"===t?s=!0:i+=t}else{if(" "===t)return[n,i];i+=t}n+=1}else'"'===t&&(o=!0,n+=1),r=!0}return[n,i]}parseStatusLine(e,t){const n=this.parseStatusFormat(t[0]),i=this.parseStatusFormat(t[1]),o=t.slice(3),s=[];let a=0;const c=this.parsePath(o,a);if(a=c[0],s.push(c[1]),a!=o.length){const e=" -> ";if(" -> "===o.slice(a,a+e.length)){a+=e.length;const t=this.parsePath(o,a);s.push(t[1])}}return[n,i,...s.map(t=>r.default.join(e,t))]}async status(e){const t={},n=["status","--porcelain","-u"];return c&&n.push("--ignored"),(await this.spawn(n,{cwd:e})).split("\n").forEach(n=>{const[i,r,o,s]=this.parseStatusLine(e,n),a=[u.untracked,u.ignored].includes(i)?u.unmodified:i,c=[u.modified,u.added,u.deleted,u.renamed,u.copied],l=a===u.added||r===u.added,d=a===u.modified||r===u.modified,f=a===u.deleted||r===u.deleted,h=a===u.renamed||r===u.renamed,p=a===u.copied||r===u.copied,m=c.includes(a)&&r===u.unmodified,g=a===u.deleted&&r===u.deleted||a===u.added&&r===u.added||a===u.unmerged||r===u.unmerged,y=a===u.ignored,v=a===u.untracked,w=s||o;t[w]={fullpath:w,x:a,y:r,added:l,modified:d,deleted:f,renamed:h,copied:p,stated:m,unmerged:g,untracked:v,ignored:y}}),t}async stage(...e){if(e.length){const t=await this.getRoot(r.default.dirname(e[0]));await this.spawn(["add",...e],{cwd:t})}}async unstage(...e){if(e.length){const t=await this.getRoot(r.default.dirname(e[0]));await this.spawn(["reset",...e],{cwd:t})}}}t.gitManager=new class{constructor(){this.cmd=new l,this.rootCache={},this.statusCache={},this.mixedStatusCache={}}async getGitRoot(e){if(e in this.rootCache)return this.rootCache[e];const t=e.split(r.default.sep),n=t.indexOf(".git");if(-1!==n){const i=t.slice(0,n).join(r.default.sep);this.rootCache[e]=i}else try{const t=await this.cmd.getRoot(e);r.default.isAbsolute(t)?this.rootCache[e]=t:r.default.join(e,t)}catch(e){return void o.onError(e)}return this.rootCache[e]}async reload(e){const t=await this.getGitRoot(e);t&&(this.statusCache[t]=await this.cmd.status(t),this.mixedStatusCache[t]={},Object.entries(this.statusCache[t]).forEach(([e,n])=>{const i=r.default.relative(t,e).split(r.default.sep);for(let e=1;e<=i.length;e++){const o=r.default.join(t,i.slice(0,e).join(r.default.sep)),s=this.mixedStatusCache[t][o];s?(s.x!==u.mixed&&s.x!==n.x&&(s.x===u.unmodified?s.x=n.x:n.x!==u.unmodified&&(s.x=u.mixed)),s.y!==u.mixed&&s.y!==n.y&&(s.y===u.unmodified?s.y=n.y:n.y!==u.unmodified&&(s.y=u.mixed))):this.mixedStatusCache[t][o]={x:n.x,y:n.y}}}))}getStatus(e){for(const[,t]of Object.entries(this.mixedStatusCache))if(e in t)return t[e];return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.sourceManager=new class{constructor(){this.registeredSources={}}registerSource(e){return this.registeredSources[e.name]=e,i.Disposable.create(()=>{delete this.registeredSources[e.name]})}}},function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",i="hour",r="day",o="week",s="month",a="quarter",c="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},f={s:d,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+d(i,2,"0")+":"+d(r,2,"0")},m:function(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,s),r=t-i<0,o=e.clone().add(n+(r?-1:1),s);return Number(-(n+(t-i)/(r?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:s,y:c,w:o,d:r,h:i,m:n,s:t,ms:e,Q:a}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",m={};m[p]=h;var g=function(e){return e instanceof b},y=function(e,t,n){var i;if(!e)return p;if("string"==typeof e)m[e]&&(i=e),t&&(m[e]=t,i=e);else{var r=e.name;m[r]=e,i=r}return n||(p=i),i},v=function(e,t,n){if(g(e))return e.clone();var i=t?"string"==typeof t?{format:t,pl:n}:t:{};return i.date=e,new b(i)},w=f;w.l=y,w.i=g,w.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u})};var b=function(){function d(e){this.$L=this.$L||y(e.locale,null,!0),this.parse(e)}var f=d.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(u);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return w},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(e,t){var n=v(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return v(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<v(e)},f.$g=function(e,t,n){return w.u(e)?this[t]:this.set(n,e)},f.year=function(e){return this.$g(e,"$y",c)},f.month=function(e){return this.$g(e,"$M",s)},f.day=function(e){return this.$g(e,"$W",r)},f.date=function(e){return this.$g(e,"$D","date")},f.hour=function(e){return this.$g(e,"$H",i)},f.minute=function(e){return this.$g(e,"$m",n)},f.second=function(e){return this.$g(e,"$s",t)},f.millisecond=function(t){return this.$g(t,"$ms",e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,a){var u=this,l=!!w.u(a)||a,d=w.p(e),f=function(e,t){var n=w.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return l?n:n.endOf(r)},h=function(e,t){return w.w(u.toDate()[e].apply(u.toDate(),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},p=this.$W,m=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case c:return l?f(1,0):f(31,11);case s:return l?f(1,m):f(0,m+1);case o:var v=this.$locale().weekStart||0,b=(p<v?p+7:p)-v;return f(l?g-b:g+(6-b),m);case r:case"date":return h(y+"Hours",0);case i:return h(y+"Minutes",1);case n:return h(y+"Seconds",2);case t:return h(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(o,a){var u,l=w.p(o),d="set"+(this.$u?"UTC":""),f=(u={},u[r]=d+"Date",u.date=d+"Date",u[s]=d+"Month",u[c]=d+"FullYear",u[i]=d+"Hours",u[n]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[l],h=l===r?this.$D+(a-this.$W):a;if(l===s||l===c){var p=this.clone().set("date",1);p.$d[f](h),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else f&&this.$d[f](h);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[w.p(e)]()},f.add=function(e,a){var u,l=this;e=Number(e);var d=w.p(a),f=function(t){var n=v(l);return w.w(n.date(n.date()+Math.round(t*e)),l)};if(d===s)return this.set(s,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===r)return f(1);if(d===o)return f(7);var h=(u={},u[n]=6e4,u[i]=36e5,u[t]=1e3,u)[d]||1,p=this.valueOf()+e*h;return w.w(p,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),r=this.$locale(),o=this.$H,s=this.$m,a=this.$M,c=r.weekdays,u=r.months,d=function(e,i,r,o){return e&&(e[i]||e(t,n))||r[i].substr(0,o)},f=function(e){return w.s(o%12||12,e,"0")},h=r.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:d(r.monthsShort,a,u,3),MMMM:u[a]||u(this,n),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:d(r.weekdaysMin,this.$W,c,2),ddd:d(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:w.s(o,2,"0"),h:f(1),hh:f(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:w.s(s,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return n.replace(l,(function(e,t){return t||p[e]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,u,l){var d,f=w.p(u),h=v(e),p=6e4*(h.utcOffset()-this.utcOffset()),m=this-h,g=w.m(this,h);return g=(d={},d[c]=g/12,d[s]=g,d[a]=g/3,d[o]=(m-p)/6048e5,d[r]=(m-p)/864e5,d[i]=m/36e5,d[n]=m/6e4,d[t]=m/1e3,d)[f]||m,l?g:w.a(g)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return m[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone();return n.$L=y(e,t,!0),n},f.clone=function(){return w.w(this.toDate(),this)},f.toDate=function(){return new Date(this.$d)},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}();return v.prototype=b.prototype,v.extend=function(e,t){return e(t,b,v),v},v.locale=y,v.isDayjs=g,v.unix=function(e){return v(1e3*e)},v.en=m[p],v.Ls=m,v}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(15),r=n(12);let o=8192,s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0],c="\r\n";class u{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var n=e,i=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(i)).write(n,0,i,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var r=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(r),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],r)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(c).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let i=t.substr(0,n),r=t.substr(n+1).trim();e[i]=r});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class l{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class d extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new u(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=d;t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends d{constructor(e,t="utf-8"){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(15),r=n(12);let o="Content-Length: ",s="\r\n";!function(e){e.is=function(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class a{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a;t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),i=[o,n.toString(),s,s];try{this.writable.write(i.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),i=[o,n.toString(),s,s];try{this.sending=!0,this.socket.write(i.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);var r;!function(e){e.none="none",e.default="default"}(r||(r={})),t.mappingMode=i.config.get("keyMappingMode",r.default);function o(e){const[t,n]=e.split(/:(.+)/,2);return{name:t,arg:n}}t.ActionSyms=Object.keys({select:0,unselect:0,toggleSelection:0,actionMenu:0,shrink:0,expand:0,expandRecursive:0,shrinkRecursive:0,expandOrShrink:0,cd:0,open:0,openInSplit:0,openInVsplit:0,openInTab:0,drop:0,gotoParent:0,copyFilepath:0,copyFilename:0,copyFile:0,cutFile:0,pasteFile:0,delete:0,deleteForever:0,addFile:0,addDirectory:0,rename:0,toggleHidden:0,refresh:0,normal:1,help:0,quit:0,systemExecute:0,listDrive:0,search:0,searchRecursive:0,gotoSource:1,sourcePrev:0,sourceNext:0,diagnosticPrev:0,diagnosticNext:0,gitPrev:0,gitNext:0,gitStage:0,gitUnstage:0}),t.defaultMappings={none:{},default:{"*":"toggleSelection","<tab>":"actionMenu",h:"shrink",l:"expand",J:["toggleSelection","normal:j"],K:["toggleSelection","normal:k"],gl:"expandRecursive",gh:"shrinkRecursive",o:"expandOrShrink","<cr>":"open",e:"open",E:"openInVsplit",t:"openInTab","<bs>":"gotoParent",y:"copyFilepath",Y:"copyFilename",c:"copyFile",x:"cutFile",p:"pasteFile",d:"delete",D:"deleteForever",a:"addFile",A:"addDirectory",r:"rename",".":"toggleHidden",R:"refresh","?":"help",q:"quit",X:"systemExecute",gd:"listDrive",f:"search",F:"searchRecursive",gf:"gotoSource:file",gb:"gotoSource:buffer","[[":"sourcePrev","]]":"sourceNext","[d":"diagnosticPrev","]d":"diagnosticNext","[c":"gitPrev","]c":"gitNext","<<":"gitStage",">>":"gitUnstage"}},t.mappings={},Object.entries(Object.assign(Object.assign({},t.defaultMappings[t.mappingMode]||{}),i.config.get("keyMappings",{}))).forEach(([e,n])=>{n&&(t.mappings[e]=Array.isArray(n)?n.map(e=>o(e)):[o(n)])}),t.reverseMappings={},Object.entries(t.mappings).find(([e,n])=>{1===n.length&&(t.reverseMappings[n[0].name]=e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6);function r(e,t,{tail:n=!1}={}){const i=o(e,t);let r=0;return async(...o)=>{const s=Date.now();if(s-r<e)return n?await i(...o):void 0;r=s;try{return await t(...o)}catch(e){throw e}}}function o(e,t){let n=null,i=null;return async(...r)=>(n&&(clearTimeout(n),i(void 0)),await new Promise((o,s)=>{i=o,n=setTimeout(async()=>{try{o(await t(...r))}catch(e){s(e)}},e)}))}t.throttle=function(e,t,n={}){const o=r(e,t,n);return(...e)=>{o(...e).catch(i.onError)}},t.throttlePromise=r,t.debounce=function(e,t){const n=o(e,t);return(...e)=>{n(...e).catch(i.onError)}},t.debouncePromise=o},function(e,t){e.exports=require("os")},function(e,t,n){e.exports=w;var i=n(5),r=n(28),o=n(13),s=(o.Minimatch,n(54)),a=n(29).EventEmitter,c=n(3),u=n(16),l=n(17),d=n(56),f=n(30),h=(f.alphasort,f.alphasorti,f.setopts),p=f.ownProp,m=n(57),g=(n(11),f.childrenIgnored),y=f.isIgnored,v=n(32);function w(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new x(e,t,n)}w.sync=d;var b=w.GlobSync=d.GlobSync;function x(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof x))return new x(e,t,n);h(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=v(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var r=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return a();for(var o=!0,s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--r._processing,r._processing<=0&&(o?process.nextTick((function(){r._finish()})):r._finish())}o=!1}w.glob=w,w.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}({},t);n.noprocess=!0;var i=new x(e,n).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var r=0;r<i[0].length;r++)if("string"!=typeof i[0][r])return!0;return!1},w.Glob=x,s(x,a),x.prototype._finish=function(){if(u(this instanceof x),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();f.finish(this),this.emit("end",this.found)}},x.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--e&&t._finish()}},x.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var i=Object.keys(n),o=this,s=i.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(n,i){n=o._makeAbs(n),r.realpath(n,o.realpathCache,(function(i,r){i?"stat"===i.syscall?a[n]=!0:o.emit("error",i):a[r]=!0,0==--s&&(o.matches[e]=a,t())}))}))},x.prototype._mark=function(e){return f.mark(this,e)},x.prototype._makeAbs=function(e){return f.makeAbs(this,e)},x.prototype.abort=function(){this.aborted=!0,this.emit("abort")},x.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},x.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<i.length;t++){var r=i[t];this._processing--,this._process(r[0],r[1],r[2],r[3])}}}},x.prototype._process=function(e,t,n,i){if(u(this instanceof x),u("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,i]);else{for(var r,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:r=null;break;default:r=e.slice(0,s).join("/")}var a,c=e.slice(s);null===r?a=".":l(r)||l(e.join("/"))?(r&&l(r)||(r="/"+r),a=r):a=r;var d=this._makeAbs(a);if(g(this,a))return i();c[0]===o.GLOBSTAR?this._processGlobStar(r,a,d,c,t,n,i):this._processReaddir(r,a,d,c,t,n,i)}},x.prototype._processReaddir=function(e,t,n,i,r,o,s){var a=this;this._readdir(n,o,(function(c,u){return a._processReaddir2(e,t,n,i,r,o,u,s)}))},x.prototype._processReaddir2=function(e,t,n,i,r,o,s,a){if(!s)return a();for(var u=i[0],l=!!this.minimatch.negate,d=u._glob,f=this.dot||"."===d.charAt(0),h=[],p=0;p<s.length;p++){if("."!==(g=s[p]).charAt(0)||f)(l&&!e?!g.match(u):g.match(u))&&h.push(g)}var m=h.length;if(0===m)return a();if(1===i.length&&!this.mark&&!this.stat){this.matches[r]||(this.matches[r]=Object.create(null));for(p=0;p<m;p++){var g=h[p];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(r,g)}return a()}i.shift();for(p=0;p<m;p++){g=h[p];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(i),r,o,a)}a()},x.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var r=this.statCache[n];r&&this.emit("stat",t,r),this.emit("match",t)}}},x.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,r=m("lstat\0"+e,(function(i,r){if(i&&"ENOENT"===i.code)return t();var o=r&&r.isSymbolicLink();n.symlinks[e]=o,o||!r||r.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));r&&i.lstat(e,r)}},x.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=m("readdir\0"+e+"\0"+t,n))){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e,n);if(p(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}i.readdir(e,function(e,t,n){return function(i,r){i?e._readdirError(t,i,n):e._readdirEntries(t,r,n)}}(this,e,n))}},x.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var r=t[i];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,n(null,t)}},x.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);r.path=this.cwd,r.code=t.code,this.emit("error",r),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},x.prototype._processGlobStar=function(e,t,n,i,r,o,s){var a=this;this._readdir(n,o,(function(c,u){a._processGlobStar2(e,t,n,i,r,o,u,s)}))},x.prototype._processGlobStar2=function(e,t,n,i,r,o,s,a){if(!s)return a();var c=i.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,r,!1,a);var d=this.symlinks[n],f=s.length;if(d&&o)return a();for(var h=0;h<f;h++){if("."!==s[h].charAt(0)||this.dot){var p=u.concat(s[h],c);this._process(p,r,!0,a);var m=u.concat(s[h],i);this._process(m,r,!0,a)}}a()},x.prototype._processSimple=function(e,t,n){var i=this;this._stat(e,(function(r,o){i._processSimple2(e,t,r,o,n)}))},x.prototype._processSimple2=function(e,t,n,i,r){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return r();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),r()},x.prototype._stat=function(e,t){var n=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&p(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!r||"DIR"===o)return t(null,o);if(r&&"FILE"===o)return t()}var s=this.statCache[n];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return r&&"FILE"===a?t():t(null,a,s)}var c=this,u=m("stat\0"+n,(function(r,o){if(o&&o.isSymbolicLink())return i.stat(n,(function(i,r){i?c._stat2(e,n,null,o,t):c._stat2(e,n,i,r,t)}));c._stat2(e,n,r,o,t)}));u&&i.lstat(n,u)},x.prototype._stat2=function(e,t,n,i,r){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,r();var o="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return r(null,!1,i);var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?r():r(null,s,i)}},function(e,t,n){e.exports=l,l.realpath=l,l.sync=d,l.realpathSync=d,l.monkeypatch=function(){i.realpath=l,i.realpathSync=d},l.unmonkeypatch=function(){i.realpath=r,i.realpathSync=o};var i=n(5),r=i.realpath,o=i.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(50);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,n){if(a)return r(e,t,n);"function"==typeof t&&(n=t,t=null),r(e,t,(function(i,r){u(i)?c.realpath(e,t,n):n(i,r)}))}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(u(n))return c.realpathSync(e,t);throw n}}},function(e,t){e.exports=require("events")},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,n),e.changedCwd=!1;var o=process.cwd();i(n,"cwd")?(e.cwd=r.resolve(n.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=n.root||r.resolve(e.cwd,"/"),e.root=r.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),i=0,r=e.matches.length;i<r;i++){var o=e.matches[i];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:u));if(e.mark){for(i=0;i<n.length;i++)n[i]=e._mark(n[i]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),i=e.cache[t]||e.cache[d(e,t)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n})))}e.ignore.length&&(n=n.filter((function(t){return!f(e,t)})));e.found=n},t.mark=function(e,t){var n=d(e,t),i=e.cache[n],r=t;if(i){var o="DIR"===i||Array.isArray(i),s="/"===t.slice(-1);if(o&&!s?r+="/":!o&&s&&(r=r.slice(0,-1)),r!==t){var a=d(e,r);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return r},t.isIgnored=f,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var r=n(3),o=n(13),s=n(17),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var n=t;return n="/"===t.charAt(0)?r.join(e.root,t):s(t)||""===t?t:e.changedCwd?r.resolve(e.cwd,t):r.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function f(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach((function(e){i[e]=t[e]}));return i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}},function(e,t,n){var i=n(31);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(r),e.exports.strict=i(o),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),o=i(n(59));t.execCli=(e,t,n)=>{const i=r.spawn(e,t,n);let o="";return i.stdout.on("data",e=>{o+=e.toString()}),new Promise((e,t)=>{i.stdout.on("error",e=>{t(e)}),i.stdout.on("end",()=>{e(o)})})},t.executable=async e=>{try{await o.default(e)}catch(e){return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebpack="function"==typeof n,t.isWindows="win32"===process.platform,t.isMacintosh="darwin"===process.platform,t.isLinux="linux"===process.platform},function(e,t,n){var i,r,o,s,a=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(s){if("object"==typeof e.exports){var a=s(n(70),t);void 0!==a&&(e.exports=a)}else r=[n,t],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o)}((function(e,t){"use strict";var n;if(Object.defineProperty(t,"__esModule",{value:!0}),"object"==typeof process)n="win32"===process.platform;else if("object"==typeof navigator){var i=navigator.userAgent;n=i.indexOf("Windows")>=0}var r=/^\w[\w\d+.-]*$/,o=/^\//,s=/^\/\//,c=!0;t.setUriThrowOnMissingScheme=function(e){var t=c;return c=e,t};var u="",l="/",d=/^(([^:\/?#]+?):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,f=function(){function e(e,t,n,i,a,d){void 0===d&&(d=!1),"object"==typeof e?(this.scheme=e.scheme||u,this.authority=e.authority||u,this.path=e.path||u,this.query=e.query||u,this.fragment=e.fragment||u):(this.scheme=function(e,t){return t||c?e||u:(e||(e="file"),e)}(e,d),this.authority=t||u,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==l&&(t=l+t):t=l}return t}(this.scheme,n||u),this.query=i||u,this.fragment=a||u,function(e,t){if(!e.scheme&&(t||c))throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!r.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!o.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(s.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,d))}return e.isUri=function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)},Object.defineProperty(e.prototype,"fsPath",{get:function(){return w(this)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,i=e.path,r=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=u),void 0===n?n=this.authority:null===n&&(n=u),void 0===i?i=this.path:null===i&&(i=u),void 0===r?r=this.query:null===r&&(r=u),void 0===o?o=this.fragment:null===o&&(o=u),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&o===this.fragment?this:new m(t,n,i,r,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=d.exec(e);return n?new m(n[2]||u,decodeURIComponent(n[4]||u),decodeURIComponent(n[5]||u),decodeURIComponent(n[7]||u),decodeURIComponent(n[9]||u),t):new m(u,u,u,u,u)},e.file=function(e){var t=u;if(n&&(e=e.replace(/\\/g,l)),e[0]===l&&e[1]===l){var i=e.indexOf(l,2);-1===i?(t=e.substring(2),e=l):(t=e.substring(2,i),e=e.substring(i)||l)}return new m("file",t,e,u,u)},e.from=function(e){return new m(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),b(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new m(t);return n._formatted=t.external,n._fsPath=t._sep===p?t.fsPath:null,n}return t},e}();t.URI=f;var h,p=n?1:void 0,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=w(this)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?b(this,!0):(this._formatted||(this._formatted=b(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=p),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(f),g=((h={})[58]="%3A",h[47]="%2F",h[63]="%3F",h[35]="%23",h[91]="%5B",h[93]="%5D",h[64]="%40",h[33]="%21",h[36]="%24",h[38]="%26",h[39]="%27",h[40]="%28",h[41]="%29",h[42]="%2A",h[43]="%2B",h[44]="%2C",h[59]="%3B",h[61]="%3D",h[32]="%20",h);function y(e,t){for(var n=void 0,i=-1,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));var s=g[o];void 0!==s?(-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),n+=s):-1===i&&(i=r)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function v(e){for(var t=void 0,n=0;n<e.length;n++){var i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=g[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function w(e){var t;return t=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,n&&(t=t.replace(/\//g,"\\")),t}function b(e,t){var n=t?v:y,i="",r=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(r&&(i+=r,i+=":"),(o||"file"===r)&&(i+=l,i+=l),o){var u=o.indexOf("@");if(-1!==u){var d=o.substr(0,u);o=o.substr(u+1),-1===(u=d.indexOf(":"))?i+=n(d,!1):(i+=n(d.substr(0,u),!1),i+=":",i+=n(d.substr(u+1),!1)),i+="@"}-1===(u=(o=o.toLowerCase()).indexOf(":"))?i+=n(o,!1):(i+=n(o.substr(0,u),!1),i+=o.substr(u))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(f=s.charCodeAt(1))>=65&&f<=90&&(s="/"+String.fromCharCode(f+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var f;(f=s.charCodeAt(0))>=65&&f<=90&&(s=String.fromCharCode(f+32)+":"+s.substr(2))}i+=n(s,!0)}return a&&(i+="?",i+=n(a,!1)),c&&(i+="#",i+=t?c:y(c,!1)),i}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),r=n(1);t.BaseColumnManager=class{constructor(e){this.columns=e,this.registeredColumns={},this.columnDraws=[]}getColumnConfig(e,t){return i.config.get("file.column."+e,t)}async init(e){this.columnDraws=[];for(const t of this.columns){const n=this.registeredColumns[t];if(n){const t=n(e);t.validate&&!t.validate()||this.columnDraws.push(t)}}this.columnDraws.forEach(e=>{e.init&&e.init()})}registerColumn(e,t){return this.registeredColumns[e]="function"==typeof t?t:()=>t,r.Disposable.create(()=>{delete this.registeredColumns[e]})}async load(e){for(const t of this.columnDraws)await(t.load&&t.load(e))}async beforeDraw(){for(const e of this.columnDraws)await(e.beforeDraw&&e.beforeDraw())}drawItem(e,t){this.columnDraws.forEach(n=>{n.draw(e,t)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(4),o=n(38),s=n(9),a=n(1),c=n(2);t.highlights={directory:i.hlGroupManager.hlLinkGroupCommand("FileDirectory","Directory"),linkTarget:i.hlGroupManager.hlLinkGroupCommand("FileLinkTarget","Comment")},i.hlGroupManager.register(t.highlights);const u=a.workspace.nvim,l=r.fileColumnManager.getColumnConfig("filename.minWidth"),d=r.fileColumnManager.getColumnConfig("filename.maxWidth");function f(e){const t=[...e],n=[];for(;t.length;){const e=t.shift();n.push(e),e.children&&Array.isArray(e.children)&&s.expandStore.isExpanded(e.fullpath)&&t.unshift(...e.children)}return n}t.flattenChildren=f;const h=new Map;const p=new Map;r.fileColumnManager.registerColumn("filename",e=>({async beforeDraw(){const t=f(e.items).filter(t=>!t.hidden||e.showHiddenFiles);t.forEach(e=>{e.data.filename={},e.data.filename.indentWidth=function(e){return r.fileColumnManager.columns.includes("indent")||r.fileColumnManager.columns.includes("indentLine")?o.indentChars.length*(e.level-(o.topLevel?0:1)):0}(e)}),await async function(e){await Promise.all(e.map(async e=>{const t=[e.uid,e.level];p.has(t)||p.set(t,await u.call("strdisplaywidth",[e.name])+e.data.filename.indentWidth),e.data.filename.usedWidth=p.get(t)}))}(t);const n=c.min([d,c.max([l,c.max(t.map(e=>e.data.filename.usedWidth))])]);await async function(e,t){await Promise.all(t.map(async t=>{let n=t.name;t.directory&&(n+="/");const i=t.symbolicLink?await c.fsReadlink(t.fullpath).then(e=>" → "+e).catch(()=>""):"",r=[t.level,n,i];if(!h.has(r)){const o=e-t.data.filename.indentWidth;h.set(r,await u.call("coc_explorer#truncate",[n,i,o,".."]))}const o=h.get(r);t.data.filename.truncatedName=o[0],t.data.filename.truncatedLinkTarget=o[1]}))}(n,t)},draw(e,n){n.directory?(e.add(n.data.filename.truncatedName,t.highlights.directory),e.add(n.data.filename.truncatedLinkTarget,t.highlights.linkTarget)):(e.add(n.data.filename.truncatedName),e.add(n.data.filename.truncatedLinkTarget,t.highlights.linkTarget)),e.add(" ")}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(7),o=n(4);t.indentChars=o.fileColumnManager.getColumnConfig("indent.chars"),t.topLevel=o.fileColumnManager.getColumnConfig("indent.topLevel");let s=o.fileColumnManager.getColumnConfig("indent.indentLine");r.enableNerdfont&&void 0===s&&(s=!0);const a={line:i.hlGroupManager.hlLinkGroupCommand("IndentLine","Comment")};i.hlGroupManager.register(a),o.fileColumnManager.registerColumn("indent",{draw(e,n){s?e.add(function(e){let n="";if(!e.parent&&!t.topLevel)return n;n=e.isLastInLevel?"└ ":"│ ";let i=e.parent;for(;i&&(i.parent||t.topLevel);)n=i.isLastInLevel?"  "+n:"│ "+n,i=i.parent;return n}(n),a.line):e.add(t.indentChars.repeat(n.level-(t.topLevel?0:1)))}})},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(41),o=n(6),s=n(0);t.activate=async e=>{const{subscriptions:t,logger:n}=e,{nvim:a}=i.workspace;o.registerLogger(n),s.hlGroupManager.register(s.hlGroupManager.hlGroupCommand("SelectUI","ctermbg=27 ctermfg=0 guibg=#1593e5 guifg=#ffffff"));const c=new r.Explorer(e);a.getOption("runtimepath").then(async t=>{t.split(",").includes(e.extensionPath)||await a.command(`execute 'noa set rtp^='.fnameescape('${e.extensionPath.replace(/'/g,"''")}')`),c.onDidAutoload.fire()}).catch(o.onError),t.push(i.commands.registerCommand("explorer",(...e)=>{c.open(e).catch(o.onError)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(6),o=n(24),s=n(65);n(66);const a=n(20),c=n(2),u=n(0);class l{constructor(e){this.context=e,this.name="coc-explorer",this.nvim=i.workspace.nvim,this.isHelpUI=!1,this.rootPaths=new Set,this.onDidAutoload=new i.Emitter,this.onDidInit=new i.Emitter,this.mappings={},this.registeredMapping=!1,this.onRegisteredMapping=new i.Emitter;const{subscriptions:t}=e;t.push(i.events.on("BufWinLeave",e=>{e!==this._bufnr&&(this.previousBufnr=e)})),this.onDidAutoload.event(()=>{this.registerMappings().catch(r.onError),u.hlGroupManager.registerHighlightSyntax().catch(r.onError)})}get args(){if(!this._args)throw Error("Explorer args not initialized yet");return this._args}get sources(){if(!this._sources)throw Error("Explorer sources not initialized yet");return this._sources}get rootPath(){if(!this._rootPath)throw Error("Explorer rootPath not initialized yet");return this._rootPath}get buffer(){return this._buffer||(this._buffer=this.nvim.createBuffer(this.bufnr)),this._buffer}get bufnr(){if(!this._bufnr)throw Error("Explorer bufnr not initialized yet");return this._bufnr}get win(){return this.winid.then(e=>e?this.nvim.createWindow(e):null)}get winnr(){return this.nvim.call("bufwinnr",this.bufnr).then(e=>e>0?e:null)}get winid(){return this.winnr.then(async e=>{if(e){const t=await this.nvim.call("win_getid",e);return t>=0?t:null}return null})}async open(e){this.registeredMapping||await new Promise(e=>{this.onRegisteredMapping.event(e)});const{nvim:t}=this;await this.initArgs(e);const[n,i]=await t.call("coc_explorer#create",[this._bufnr,this.args.position,this.args.width,this.args.toggle,this.name]);-1!==n&&(this._bufnr=n,i||this.onDidInit.fire(this._bufnr),this.isHelpUI&&await this.sources[0].quitHelp(),await c.execNotifyBlock(async()=>{for(const e of this.sources)await e.opened(!0);await this.reloadAll({render:!1});const e=this.sources.find(e=>e instanceof d.FileSource);let t=null;e&&this.revealFilepath&&c.autoReveal&&(t=await e.revealItemByPath(this.revealFilepath)),await this.renderAll({notify:!0}),e&&(this.revealFilepath&&c.autoReveal?await e.gotoItem(t,{col:1,notify:!0}):i||await e.gotoRoot({col:1,notify:!0}))}))}async getRootPath(){let e=!1;if("nofile"===await this.nvim.getVar("&buftype"))e=!0;else{await this.nvim.call("bufname",["%"])||(e=!0)}return e?await this.nvim.call("getcwd",[]):i.workspace.rootPath}async initArgs(e){this.lastArgStrings&&this.lastArgStrings.toString()===e.toString()||(this._args=await s.parseArgs(...e),this.lastArgStrings=e,this._sources=this.args.sources.map(e=>{if(a.sourceManager.registeredSources[e.name]){const t=a.sourceManager.registeredSources[e.name];return t.bindExplorer(this,e.expand),t}return i.workspace.showMessage(`explorer source(${e.name}) not found`,"error"),null}).filter(e=>null!==e)),this._rootPath=this.args.rootPath||await this.getRootPath(),this.revealFilepath=this.args.revealPath||await this.nvim.call("expand","%:p"),this.rootPaths.add(this._rootPath)}async prompt(e,t,n){t||(t=["yes","no"],n="no");const i=n?t.indexOf(n):-1,r=await this.nvim.call("confirm",[e,t.map(e=>"&"+e[0].toUpperCase()+e.slice(1)).join("\n"),i+1]);return 0===r?null:t[r-1]||null}async registerMappings(){this.mappings={},Object.entries(o.mappings).forEach(([e,t])=>{this.mappings[e]={},["n","v"].forEach(n=>{const o=`explorer-action-${n}-${e.replace(/\<(.*)\>/,"[$1]")}`;this.context.subscriptions.push(i.workspace.registerKeymap([n],o,async()=>{this.doActions(t,n).catch(r.onError)})),this.mappings[e][n]=`<Plug>(coc-${o})`})}),await this.nvim.call("coc_explorer#register_mappings",[this.mappings]),this.registeredMapping=!0,this.onRegisteredMapping.fire()}async executeMappings(){await this.nvim.call("coc_explorer#execute_mappings",[this.mappings])}async clearMappings(){await this.nvim.call("coc_explorer#clear_mappings",[this.mappings])}async doActions(e,t="n"){for(const n of e)await this.doAction(n,t)}async doAction(e,t="n"){const{nvim:n}=this,r=[],o=await i.workspace.document;if("v"===t){const e=await i.workspace.getSelectedRange("v",o);if(e)for(let t=e.start.line;t<=e.end.line;t++)r.push(t)}else{const e=await n.call("line",".")-1;r.push(e)}const s=new Map;for(const e of r){const[t]=this.findSourceByLineIndex(e);if(t){s.has(t)||s.set(t,new Set);const n=e-t.startLine,[,i]=t.lines[n];s.get(t).add(i)}}await Promise.all(Array.from(s.entries()).map(async([t,n])=>{n.has(null)?await t.doRootAction(e.name,e.arg):await t.doAction(e.name,Array.from(n).filter(e=>e),e.arg)}))}findSourceByLineIndex(e){const t=this.sources.findIndex(t=>e<t.endLine);return-1===t?[null,-1]:[this.sources[t],t]}async currentCursor(){const e=await this.win;if(e){const[t,n]=await e.cursor;return{lineIndex:t-1,col:n+1}}return null}async currentCol(){const e=await this.currentCursor();return e?e.col:0}async storeCursor(){const e=await this.currentCursor();let t=await this.nvim.call("winsaveview");if(t={topline:t.topline},e){const[,n]=this.findSourceByLineIndex(e.lineIndex),i=this.sources[n];if(i){const n=e.lineIndex-i.startLine,r=await i.getItemByIndex(n);return async(o=!1)=>{await c.execNotifyBlock(async()=>{this.nvim.call("winrestview",[t],!0),await i.gotoItem(r,{lineIndex:n,col:e.col,notify:!0})},o)}}}return async(e=!1)=>{await c.execNotifyBlock(()=>{this.nvim.call("winrestview",t,!0)},e)}}async setLines(e,t,n,i=!1){await c.execNotifyBlock(async()=>{this.buffer.setOption("modifiable",!0,!0),await this.buffer.setLines(e,{start:t,end:n},!0),this.buffer.setOption("modifiable",!1,!0)},i)}async reloadAll({render:e=!0,notify:t=!1}={}){await c.execNotifyBlock(async()=>{await Promise.all(this.sources.map(e=>e.reload(null,{render:!1,notify:!0}))),e&&await this.renderAll({notify:!0,storeCursor:!1})},t)}async renderAll({notify:e=!1,storeCursor:t=!1}={}){await c.execNotifyBlock(async()=>{const e=t?await this.storeCursor():null;for(const e of this.sources)await e.render({notify:!0,storeCursor:!1});e&&await e(!0)},e)}async quit(){const e=await this.win;e&&await e.close(!0)}async selectWindowsUI(e,t=(()=>{})){const n=await this.nvim.call("coc_explorer#select_wins",[this.name,c.config.get("openAction.select.filterFloatWindows")]);n>0?await Promise.resolve(e(n)):-1===n&&await Promise.resolve(t())}}t.Explorer=l,l.colorId=10800;const d=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.byteIndex=function(e,t){const n=e.slice(0,t);return Buffer.byteLength(n)},t.byteLength=function(e){return Buffer.byteLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsigned=e=>"number"!=typeof e?0:e<0?0:Math.floor(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=function(e){const t=[...e],n=[];for(;t.length;){const e=t.shift();Array.isArray(e)?t.unshift(...e):n.push(e)}return n},t.chunk=function(e,n=1){const i=t.max([n,0]);if(!e.length||n<1)return[];const r=[];for(let t=0;t<Math.ceil(e.length/i);t++)r.push(e.slice(t*n,(t+1)*n));return r},t.sum=e=>e.reduce((e,t)=>e+t,0),t.max=e=>{let t=e.length-1,n=-1/0;for(;t>=0;)e[t]>n&&(n=e[t]),t-=1;return n},t.min=e=>{let t=e.length,n=1/0;for(;t>=0;)e[t]<n&&(n=e[t]),t-=1;return n},t.findLastIndex=function(e,t){let n=e.length-1;for(;n>=0;){if(t(e[n]))return n;n-=1}return-1},t.findLast=function(e,t){let n=e.length-1;for(;n>=0;){if(t(e[n]))return e[n];n-=1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=e=>new Promise(t=>{setTimeout(t,e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.config=i.workspace.getConfiguration("explorer"),t.activeMode=t.config.get("activeMode"),t.autoReveal=t.config.get("file.autoReveal"),t.openStrategy=t.config.get("openAction.strategy")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(25),o=n(6);let s=!1;t.onBufEnter=function(e,t){const n=r.throttle(e,t,{tail:!0});i.events.on("BufEnter",async e=>{s||n(e)})},t.avoidOnBufEnter=async function(e){s=!0;try{await e()}catch(e){o.onError(e)}s=!1}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(5)),o=i(n(26)),s=n(11),a=i(n(49)),c=i(n(58)),u=i(n(3)),l=n(33),d=n(34);t.fsOpen=s.promisify(r.default.open),t.fsClose=s.promisify(r.default.close),t.fsTouch=async e=>await t.fsClose(await t.fsOpen(e,"w")),t.fsMkdir=s.promisify(r.default.mkdir),t.fsReaddir=s.promisify(r.default.readdir),t.fsReadlink=s.promisify(r.default.readlink),t.fsAccess=(e,t)=>new Promise(n=>{r.default.access(e,t,e=>{n(!e)})}),t.fsExists=t.fsAccess,t.fsStat=s.promisify(r.default.stat),t.fsLstat=s.promisify(r.default.lstat),t.fsCopyFile=s.promisify(r.default.copyFile),t.fsRename=s.promisify(r.default.rename),t.fsTrash=e=>c.default(e,{glob:!1}),t.fsRimraf=s.promisify(a.default),t.copyFileOrDirectory=async(e,n)=>{if((await t.fsStat(e)).isDirectory()){await t.fsMkdir(n);const i=await t.fsReaddir(e);for(const r of i)await t.copyFileOrDirectory(u.default.join(e,r),u.default.join(n,r))}else await t.fsCopyFile(e,n)},t.normalizePath=e=>{let t=u.default.normalize(e);if("~"===t[0]&&(t=u.default.join(o.default.homedir(),t.slice(1))),d.isWindows&&/[a-z]:/.test(t)){t=t[0].toUpperCase()+t.slice(1)}return t},t.listDrive=async()=>{if(d.isWindows){return(await l.execCli("wmic",["logicaldisk","get","name"])).split("\n").map(e=>e.trim()).filter(e=>e.endsWith(":"))}throw new Error("not support listDrive in "+process.platform)}},function(e,t,n){const i=n(16),r=n(3),o=n(5);let s=void 0;try{s=n(27)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const u="win32"===process.platform,l=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||o[t],e[t+="Sync"]=e[t]||o[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===s)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof n,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),l(t);let r=0,o=null,a=0;const u=(e,i)=>e?n(e):0===(a=i.length)?n():void i.forEach(e=>{const i=s=>{if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&r<t.maxBusyTries)return r++,setTimeout(()=>f(e,t,i),100*r);if("EMFILE"===s.code&&c<t.emfileWait)return setTimeout(()=>f(e,t,i),c++);"ENOENT"===s.code&&(s=null)}c=0,(e=>{o=o||e,0==--a&&n(o)})(s)};f(e,t,i)});if(t.disableGlob||!s.hasMagic(e))return u(null,[e]);t.lstat(e,(n,i)=>{if(!n)return u(null,[e]);s(e,t.glob,u)})},f=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.lstat(e,(i,r)=>i&&"ENOENT"===i.code?n(null):(i&&"EPERM"===i.code&&u&&h(e,t,i,n),r&&r.isDirectory()?m(e,t,i,n):void t.unlink(e,i=>{if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return u?h(e,t,i,n):m(e,t,i,n);if("EISDIR"===i.code)return m(e,t,i,n)}return n(i)})))},h=(e,t,n,r)=>{i(e),i(t),i("function"==typeof r),n&&i(n instanceof Error),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,o)=>{i?r("ENOENT"===i.code?null:n):o.isDirectory()?m(e,t,n,r):t.unlink(e,r)})})},p=(e,t,n)=>{i(e),i(t),n&&i(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}let r;try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?v(e,t,n):t.unlinkSync(e)},m=(e,t,n,r)=>{i(e),i(t),n&&i(n instanceof Error),i("function"==typeof r),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):g(e,t,r)})},g=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.readdir(e,(i,o)=>{if(i)return n(i);let s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach(i=>{d(r.join(e,i),t,i=>{if(!s)return i?n(s=i):void(0==--a&&t.rmdir(e,n))})})})},y=(e,t)=>{let n;if(l(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(i){n=s.sync(e,t.glob)}if(n.length)for(let e=0;e<n.length;e++){const i=n[e];let r;try{r=t.lstatSync(i)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&u&&p(i,t,e)}try{r&&r.isDirectory()?v(i,t,null):t.unlinkSync(i)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return u?p(i,t,e):v(i,t,e);if("EISDIR"!==e.code)throw e;v(i,t,e)}}},v=(e,t,n)=>{i(e),i(t),n&&i(n instanceof Error);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw n;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||w(e,t)}},w=(e,t)=>{i(e),i(t),t.readdirSync(e).forEach(n=>y(r.join(e,n),t));const n=u?100:1;let o=0;for(;;){let i=!0;try{const r=t.rmdirSync(e,t);return i=!1,r}finally{if(++o<n&&i)continue}}};e.exports=d,d.sync=y},function(e,t,n){var i=n(3),r="win32"===process.platform,o=n(5),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}i.normalize;if(r)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(r)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,a,l,d=e,f={},h={};function p(){var t=u.exec(e);n=t[0].length,s=t[0],a=t[0],l="",r&&!h[a]&&(o.lstatSync(a),h[a]=!0)}for(p();n<e.length;){c.lastIndex=n;var m=c.exec(e);if(l=s,s+=m[0],a=l+m[1],n=c.lastIndex,!(h[a]||t&&t[a]===a)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,a))g=t[a];else{var y=o.lstatSync(a);if(!y.isSymbolicLink()){h[a]=!0,t&&(t[a]=a);continue}var v=null;if(!r){var w=y.dev.toString(32)+":"+y.ino.toString(32);f.hasOwnProperty(w)&&(v=f[w])}null===v&&(o.statSync(a),v=o.readlinkSync(a)),g=i.resolve(l,v),t&&(t[a]=g),r||(f[w]=v)}e=i.resolve(g,e.slice(n)),p()}}return t&&(t[d]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var s,l,d,f,h=e,p={},m={};function g(){var t=u.exec(e);s=t[0].length,l=t[0],d=t[0],f="",r&&!m[d]?o.lstat(d,(function(e){if(e)return n(e);m[d]=!0,y()})):process.nextTick(y)}function y(){if(s>=e.length)return t&&(t[h]=e),n(null,e);c.lastIndex=s;var i=c.exec(e);return f=l,l+=i[0],d=f+i[1],s=c.lastIndex,m[d]||t&&t[d]===d?process.nextTick(y):t&&Object.prototype.hasOwnProperty.call(t,d)?b(t[d]):o.lstat(d,v)}function v(e,i){if(e)return n(e);if(!i.isSymbolicLink())return m[d]=!0,t&&(t[d]=d),process.nextTick(y);if(!r){var s=i.dev.toString(32)+":"+i.ino.toString(32);if(p.hasOwnProperty(s))return w(null,p[s],d)}o.stat(d,(function(e){if(e)return n(e);o.readlink(d,(function(e,t){r||(p[s]=t),w(e,t)}))}))}function w(e,r,o){if(e)return n(e);var s=i.resolve(f,r);t&&(t[o]=s),b(s)}function b(t){e=i.resolve(t,e.slice(s)),g()}g()}},function(e,t,n){var i=n(52),r=n(53);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[];var s=r("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var d=c||u;var g=s.body.indexOf(",")>=0;if(!d&&!g)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];var y;if(d)y=s.body.split(/\.\./);else{if(1===(y=function e(t){if(!t)return[""];var n=[];var i=r("{","}",t);if(!i)return t.split(",");var o=i.pre;var s=i.body;var a=i.post;var c=o.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));n.push.apply(n,c);return n}(s.body)).length)if(1===(y=e(y[0],!1).map(f)).length)return(w=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+y[0]+e}))}var v=s.pre;var w=s.post.length?e(s.post,!1):[""];var b;if(d){var x=l(y[0]),_=l(y[1]),C=Math.max(y[0].length,y[1].length),E=3==y.length?Math.abs(l(y[2])):1,M=p;_<x&&(E*=-1,M=m);var k=y.some(h);b=[];for(var R=x;M(R,_);R+=E){var S;if(u)"\\"===(S=String.fromCharCode(R))&&(S="");else if(S=String(R),k){var O=C-S.length;if(O>0){var I=new Array(O+1).join("0");S=R<0?"-"+I+S.slice(1):I+S}}b.push(S)}}else b=i(y,(function(t){return e(t,!1)}));for(var T=0;T<b.length;T++)for(var A=0;A<w.length;A++){var D=v+b[T]+w[A];(!n||d||D)&&o.push(D)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(d)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function f(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],r=0;r<e.length;r++){var o=t(e[r],r);n(o)?i.push.apply(i,o):i.push(o)}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var i=o(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function r(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var i,r,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(i=[],o=n.length;l>=0&&!a;)l==c?(i.push(l),c=n.indexOf(e,l+1)):1==i.length?a=[i.pop(),u]:((r=i.pop())<o&&(o=r,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;i.length&&(a=[o,s])}return a}e.exports=i,i.range=o},function(e,t,n){try{var i=n(11);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(55)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=p,p.GlobSync=m;var i=n(5),r=n(28),o=n(13),s=(o.Minimatch,n(27).Glob,n(11),n(3)),a=n(16),c=n(17),u=n(30),l=(u.alphasort,u.alphasorti,u.setopts),d=u.ownProp,f=u.childrenIgnored,h=u.isIgnored;function p(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach((function(t,n){var i=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),i[r.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(o)]=!0}}))}u.finish(this)},m.prototype._process=function(e,t,n){a(this instanceof m);for(var i,r=0;"string"==typeof e[r];)r++;switch(r){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,r).join("/")}var s,u=e.slice(r);null===i?s=".":c(i)||c(e.join("/"))?(i&&c(i)||(i="/"+i),s=i):s=i;var l=this._makeAbs(s);f(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(i,s,l,u,t,n):this._processReaddir(i,s,l,u,t,n))},m.prototype._processReaddir=function(e,t,n,i,r,o){var a=this._readdir(n,o);if(a){for(var c=i[0],u=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),f=[],h=0;h<a.length;h++){if("."!==(g=a[h]).charAt(0)||d)(u&&!e?!g.match(c):g.match(c))&&f.push(g)}var p=f.length;if(0!==p)if(1!==i.length||this.mark||this.stat){i.shift();for(h=0;h<p;h++){var m;g=f[h];m=e?[e,g]:[g],this._process(m.concat(i),r,o)}}else{this.matches[r]||(this.matches[r]=Object.create(null));for(var h=0;h<p;h++){var g=f[h];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=s.join(this.root,g)),this._emitMatch(r,g)}}}},m.prototype._emitMatch=function(e,t){if(!h(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=i.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[e]=r,r||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,i.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,n,i,r,o){var s=this._readdir(n,o);if(s){var a=i.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,r,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var d=0;d<l;d++){if("."!==s[d].charAt(0)||this.dot){var f=c.concat(s[d],a);this._process(f,r,!0);var h=c.concat(s[d],i);this._process(h,r,!0)}}}},m.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var r=this.cache[t];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var o=this.statCache[t];if(!o){var s;try{s=i.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=i.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;r=!0;return o&&(r=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||r,(!n||"FILE"!==r)&&r},m.prototype._mark=function(e){return u.mark(this,e)},m.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},function(e,t,n){var i=n(31),r=Object.create(null),o=n(32);function s(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i]=e[i];return n}e.exports=i((function(e,t){return r[e]?(r[e].push(t),null):(r[e]=[t],function(e){return o((function t(){var n=r[e],i=n.length,o=s(arguments);try{for(var a=0;a<i;a++)n[a].apply(null,o)}finally{n.length>i?(n.splice(0,i),process.nextTick((function(){t.apply(null,o)}))):delete r[e]}}))}(e))}))},function(e,t){e.exports=require("trash")},function(e,t,n){const i="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,r=n(3),o=i?";":":",s=n(60),a=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const n=t.colon||o,r=e.match(/\//)||i&&e.match(/\\/)?[""]:[...i?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],s=i?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=i?s.split(n):[""];return i&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:r,pathExt:a,pathExtExe:s}},u=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),t||(t={});const{pathEnv:i,pathExt:o,pathExtExe:u}=c(e,t),l=[],d=n=>new Promise((o,s)=>{if(n===i.length)return t.all&&l.length?o(l):s(a(e));const c=i[n],u=/^".*"$/.test(c)?c.slice(1,-1):c,d=r.join(u,e),h=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;o(f(h,n,0))}),f=(e,n,i)=>new Promise((r,a)=>{if(i===o.length)return r(d(n+1));const c=o[i];s(e+c,{pathExt:u},(o,s)=>{if(!o&&s){if(!t.all)return r(e+c);l.push(e+c)}return r(f(e,n,i+1))})});return n?d(0).then(e=>n(null,e),n):d(0)};e.exports=u,u.sync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:i,pathExtExe:o}=c(e,t),u=[];for(let a=0;a<n.length;a++){const c=n[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,d=r.join(l,e),f=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<i.length;e++){const n=f+i[e];try{if(s.sync(n,{pathExt:o})){if(!t.all)return n;u.push(n)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)}},function(e,t,n){var i;n(5);function r(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,i){r(e,t||{},(function(e,t){e?i(e):n(t)}))}))}i(e,t||{},(function(e,i){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,i=!1),n(e,i)}))}i="win32"===process.platform||global.TESTING_WINDOWS?n(61):n(62),e.exports=r,r.sync=function(e,t){try{return i.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,n){e.exports=o,o.sync=function(e,t){return r(i.statSync(e),e,t)};var i=n(5);function r(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var i=0;i<n.length;i++){var r=n[i].toLowerCase();if(r&&e.substr(-r.length).toLowerCase()===r)return!0}return!1}(t,n)}function o(e,t,n){i.stat(e,(function(i,o){n(i,!i&&r(o,e,t))}))}},function(e,t,n){e.exports=r,r.sync=function(e,t){return o(i.statSync(e),t)};var i=n(5);function r(e,t,n){i.stat(e,(function(e,i){n(e,!e&&o(i,t))}))}function o(e,t){return e.isFile()&&function(e,t){var n=e.mode,i=e.uid,r=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=a|c;return n&u||n&c&&r===s||n&a&&i===o||n&l&&0===o}(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1).workspace.nvim;t.execNotifyBlock=async function(e,t=!1){t||i.pauseNotification(),await e(),t||await i.resumeNotification()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),{nvim:r}=i.workspace;let o=null;t.supportSetbufline=async function(){return null===o&&(o=Boolean(await r.call("exists",["*setbufline"]))),o},t.supportBufferHighlight=function(){return!i.workspace.env.isVim||i.workspace.env.textprop},t.enableWrapscan=async function(){return!!await r.getOption("wrapscan")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),r=["toggle","tab-isolate"],o=r.map(e=>"no-"+e);function s(e){return e.split(",").map(e=>{let t,n=!1;return e.endsWith("+")?(n=!0,t=e.slice(0,e.length-1)):e.endsWith("-")?(n=!1,t=e.slice(0,e.length-1)):t=e,{name:t,expand:n}})}t.parseSources=s,t.parseArgs=async function(...e){const t={sources:i.config.get("sources"),toggle:i.config.get("toggle"),width:i.config.get("width"),position:i.config.get("position"),rootPath:null,bufferColumns:i.config.get("buffer.columns"),fileColumns:i.config.get("file.columns"),revealPath:null};for(;e.length>0;){const n=e.shift();if(n.startsWith("--")){let i,a;n.includes("=")?[i,a]=n.slice(2).split("=",2):(i=n.slice(2),r.includes(i)?a=!0:o.includes(i)?(i=i.slice(3),a=!1):e.length>0&&(a=e.shift())),void 0!==i&&void 0!==a?"sources"===i?t.sources=s(a):"reveal"===i?t.revealPath=a:"toggle"===i?t.toggle=a:"width"===i?t.width=parseInt(a,10):"position"===i?t.position=a:"buffer-columns"===i?t.bufferColumns=a.split(","):"file-columns"===i&&(t.fileColumns=a.split(",")):t.rootPath=n}else t.rootPath=n}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(67),n(9)},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=i(n(3)),s=n(2),a=n(0),c=n(7),u=n(20),l=n(10);n(110);const d=n(118),f=/^\s*(\d+)(.+?)"(.+?)".*/,h=a.hlGroupManager.hlLinkGroupCommand.bind(a.hlGroupManager),p={title:h("BufferRoot","Constant"),expandIcon:h("BufferExpandIcon","Special")};a.hlGroupManager.register(p);class m extends c.ExplorerSource{constructor(){super(...arguments),this.name="buffer",this.hlSrcId=r.workspace.createNameSpace("coc-explorer-buffer"),this.showHiddenBuffers=s.config.get("buffer.showHiddenBuffers")}async init(){const{nvim:e}=this;await l.bufferColumnManager.init(this),s.activeMode&&this.explorer.onDidInit.event(()=>{r.workspace.env.isVim?s.onBufEnter(500,async e=>{e===this.explorer.bufnr&&await this.reload(null,{render:!1})}):r.events.on(["BufCreate","BufHidden","BufUnload","BufWritePost","InsertLeave"],s.debounce(500,async()=>{await this.reload(null)}))}),d.initBufferActions(this)}async loadItems(){if(!this.expanded)return[];const{nvim:e}=this,t=this.showHiddenBuffers?"ls!":"ls";return(await e.call("execute",t)).split(/\n/).reduce((e,t)=>{const n=t.match(f);if(!n)return e;const i=n[1],r=n[2],a=n[3];return e.push({uid:this.name+"-"+i,bufnr:parseInt(i),bufnrStr:i,bufname:a,fullpath:o.default.resolve(s.normalizePath(a)),basename:o.default.basename(a),unlisted:r.includes("u"),current:r.includes("%"),previous:r.includes("#"),visible:r.includes("a"),hidden:r.includes("h"),modifiable:!r.includes("-"),readonly:r.includes("="),terminal:r.includes("R")||r.includes("F")||r.includes("?"),modified:r.includes("+"),readErrors:r.includes("x")}),e},[])}async loaded(e){await l.bufferColumnManager.load(e)}async draw(e){await l.bufferColumnManager.beforeDraw(),e.newRoot(e=>{e.add(this.expanded?c.sourceIcons.expanded:c.sourceIcons.shrinked,p.expandIcon),e.add(" "),e.add(`[BUFFER${this.showHiddenBuffers?" I":""}]`,p.title)});for(const t of this.items)e.newItem(t,e=>{e.add("  "),l.bufferColumnManager.drawItem(e,t)})}}t.BufferSource=m,u.sourceManager.registerSource(new m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(6);class o extends i.BasicList{constructor(e){super(e),this.defaultAction="do",this.name="explorerActions",this.explorerActions=[],this.addAction("do",e=>{new Promise(async t=>{e.data.root?await e.data.callback():await e.data.callback(e.data.items),t()}).catch(r.onError)})}setExplorerActions(e){this.explorerActions=e}async loadItems(){return this.explorerActions.map(e=>({label:`${e.name} [${e.key||""}] ${e.description}`,data:{root:e.root,callback:e.callback,items:e.items}}))}doHighlight(){const{nvim:e}=this;e.pauseNotification(),e.command("syntax match CocExplorerActionName /\\v^\\w+/",!0),e.command("syntax match CocExplorerActionKey /\\v\\[.*\\]/",!0),e.command("syntax match CocExplorerActionDescription /\\v\\] \\zs.*/",!0),e.command("highlight default link CocExplorerActionName PreProc",!0),e.command("highlight default link CocExplorerActionKey Identifier",!0),e.command("highlight default link CocExplorerActionDescription Comment",!0),e.resumeNotification().catch(r.onError)}}t.ExplorerActionList=o,t.explorerActionList=new o(i.workspace.nvim)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.view=e,this.line=t,this.content=""}add(e,t){t&&e&&(e=`<${t.markerID}|`+e+`|${t.markerID}>`),this.content+=e}}t.SourceRowBuilder=i;t.SourceViewBuilder=class{constructor(){this.lines=[],this.lines=[],this.currentLine=0}newRoot(e){const t=new i(this,this.currentLine);e(t),this.lines.push([t.content,null]),this.currentLine++}newItem(e,t){const n=new i(this,this.currentLine);t(n),this.lines.push([n.content,e]),this.currentLine++}}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=70},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(72),n(75),n(76),n(37),n(38),n(78),n(79),n(81),n(82),n(83),n(84),n(85),n(86)},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(73)),o=n(0),s=n(4),a=n(19),c=i(n(3)),u={stage:o.hlGroupManager.hlLinkGroupCommand("FileGitStage","Comment"),unstage:o.hlGroupManager.hlLinkGroupCommand("FileGitUnstage","Operator")};o.hlGroupManager.register(u);const l=e=>s.fileColumnManager.getColumnConfig("git.icon."+e),d={[a.GitFormat.mixed]:l("mixed"),[a.GitFormat.unmodified]:l("unmodified"),[a.GitFormat.modified]:l("modified"),[a.GitFormat.added]:l("added"),[a.GitFormat.deleted]:l("deleted"),[a.GitFormat.renamed]:l("renamed"),[a.GitFormat.copied]:l("copied"),[a.GitFormat.unmerged]:l("unmerged"),[a.GitFormat.untracked]:l("untracked"),[a.GitFormat.ignored]:l("ignored")};s.fileColumnManager.registerColumn("git",e=>({async validate(){try{return await r.default("git"),!0}catch(e){return!1}},async load(t){const n=t?t.directory?t.fullpath:c.default.dirname(t.fullpath):e.root;await a.gitManager.reload(n)},beforeDraw(){e.gitChangedLineIndexes=[]},draw(t,n){const i=(e,n)=>{e.trim().length>0?t.add(e,n?u.stage:u.unstage):t.add(e)},r=a.gitManager.getStatus(n.fullpath);r?(i(d[r.x],!0),i(d[r.y],!1),t.add(" "),e.gitChangedLineIndexes.push(t.line)):t.add("   ")}}))},function(e,t,n){e.exports=n(74)},function(e,t,n){"use strict";var i=n(14).exec,r=n(14).execSync,o=n(5),s=n(3),a=o.access,c=o.accessSync,u=o.constants||o,l="win32"==process.platform,d=function(e,t,n){!function(e,t){a(e,u.F_OK,(function(e){t(!e)}))}(e,(function(r){if(r)!function(e,t){a(e,u.F_OK|u.X_OK,(function(e){t(null,!e)}))}(e,n);else i("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,i){n(null,!!t)}))}))},f=function(e,t){if(function(e){try{return c(e,u.F_OK),!1}catch(e){return!0}}(e))try{return!!r("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return c(e,u.F_OK|u.X_OK),!0}catch(e){return!1}}(e)},h=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};l&&(h=function(e){return/[\\]/.test(e)?'"'+s.dirname(e)+'"'+":"+('"'+s.basename(e)+'"'):'"'+e+'"'}),e.exports=function e(t,n){var r=h(t);if(!n&&"undefined"!=typeof Promise)return new Promise((function(n,i){e(t,(function(e,r){r?n(t):i(e)}))}));l?function(e,t,n){if(/[\x00-\x1f<>:"\|\?\*]/.test(e))n(null,!1);else i("where "+t,(function(e){n(null,null===e)}))}(t,r,n):d(t,r,n)},e.exports.sync=function(e){var t=h(e);return l?function(e,t,n){if(/[\x00-\x1f<>:"\|\?\*]/.test(e))return!1;try{return!!r("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):f(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(7);i.fileColumnManager.registerColumn("selection",e=>({draw(t,n){e.isSelectedAny()&&(t.add(e.isSelectedItem(n)?r.sourceIcons.selected:r.sourceIcons.unselected),t.add(" "))}}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4),s=n(7),a=i(n(3)),c=i(n(77)),u=n(37),l=n(0),d=c.default;t.nerdfontHighlights={},Object.entries(c.default.icons).forEach(([e,n])=>{t.nerdfontHighlights[e]=l.hlGroupManager.hlGroupCommand(`FileIconNerdfont_${e}`,`guifg=${n.color}`)}),l.hlGroupManager.register(t.nerdfontHighlights);const f=e=>e.replace(/^\./,"").includes(".")?f(a.default.basename(e,a.default.extname(e))):e;o.fileColumnManager.registerColumn("icon",{draw(e,n){if(n.directory)s.enableNerdfont?e.add(r.expandStore.isExpanded(n.fullpath)?c.default.icons.folderOpened.code:c.default.icons.folderClosed.code,u.highlights.directory):e.add(r.expandStore.isExpanded(n.fullpath)?s.sourceIcons.expanded:s.sourceIcons.shrinked,u.highlights.directory),e.add(" ");else{if(s.enableNerdfont){const i=(e=>{const t=a.default.extname(e).slice(1),n=f(e);if(d.filenames.hasOwnProperty(n)){const e=d.filenames[n];return Object.assign({name:e},d.icons[e])}if(d.filenames.hasOwnProperty(e)){const t=d.filenames[e];return Object.assign({name:t},d.icons[t])}const i=Object.entries(d.patternMatches).find(([t])=>new RegExp(t).test(e));if(i){const e=i[1];return Object.assign({name:e},d.icons[e])}if(d.extensions.hasOwnProperty(t)){const e=d.extensions[t];return Object.assign({name:e},d.icons[e])}})(n.name.toLowerCase());i?e.add(i.code,t.nerdfontHighlights[i.name]):n.hidden?e.add(d.icons.fileHidden.code,t.nerdfontHighlights.fileHidden):e.add(d.icons.file.code,t.nerdfontHighlights.file)}else e.add(" ");e.add(" ")}}})},function(e){e.exports=JSON.parse('{"icons":{"folderClosed":{"code":"","color":"#00afaf"},"folderOpened":{"code":"","color":"#00afaf"},"folderSymlink":{"code":"","color":"#00afaf"},"file":{"code":"","color":"#999999"},"fileSymlink":{"code":"","color":"#999999"},"fileHidden":{"code":"﬒","color":"#999999"},"excel":{"code":"","color":"#207245"},"word":{"code":"","color":"#185abd"},"ppt":{"code":"","color":"#cb4a32"},"stylus":{"code":"","color":"#8dc149"},"sass":{"code":"","color":"#f55385"},"html":{"code":"","color":"#e37933"},"xml":{"code":"謹","color":"#e37933"},"ejs":{"code":"","color":"#cbcb41"},"css":{"code":"","color":"#519aba"},"webpack":{"code":"ﰩ","color":"#519aba"},"markdown":{"code":"","color":"#519aba"},"json":{"code":"","color":"#cbcb41"},"javascript":{"code":"","color":"#cbcb41"},"javascriptreact":{"code":"","color":"#519aba"},"ruby":{"code":"","color":"#cc3e44"},"php":{"code":"","color":"#a074c4"},"python":{"code":"","color":"#519aba"},"coffee":{"code":"","color":"#cbcb41"},"mustache":{"code":"","color":"#e37933"},"conf":{"code":"","color":"#6d8086"},"image":{"code":"","color":"#a074c4"},"ico":{"code":"","color":"#cbcb41"},"twig":{"code":"","color":"#8dc149"},"c":{"code":"","color":"#519aba"},"h":{"code":"","color":"#a074c4"},"haskell":{"code":"","color":"#a074c4"},"lua":{"code":"","color":"#519aba"},"java":{"code":"","color":"#cc3e44"},"terminal":{"code":"","color":"#4d5a5e"},"ml":{"code":"λ","color":"#e37933"},"diff":{"code":"","color":"#41535b"},"sql":{"code":"","color":"#f55385"},"clojure":{"code":"","color":"#8dc149"},"edn":{"code":"","color":"#519aba"},"scala":{"code":"","color":"#cc3e44"},"go":{"code":"","color":"#519aba"},"dart":{"code":"","color":"#03589C"},"firefox":{"code":"","color":"#e37933"},"vs":{"code":"","color":"#854CC7"},"perl":{"code":"","color":"#519aba"},"rss":{"code":"","color":"FB9D3B"},"fsharp":{"code":"","color":"#519aba"},"rust":{"code":"","color":"#519aba"},"dlang":{"code":"","color":"#cc3e44"},"erlang":{"code":"","color":"#A90533"},"elixir":{"code":"","color":"#a074c4"},"mix":{"code":"","color":"#cc3e44"},"vim":{"code":"","color":"#019833"},"ai":{"code":"","color":"#cbcb41"},"psd":{"code":"","color":"#519aba"},"psb":{"code":"","color":"#519aba"},"typescript":{"code":"","color":"#519aba"},"typescriptreact":{"code":"","color":"#519aba"},"julia":{"code":"","color":"#a074c4"},"puppet":{"code":"","color":"#cbcb41"},"vue":{"code":"﵂","color":"#8dc149"},"swift":{"code":"","color":"#e37933"},"gitconfig":{"code":"","color":"#41535b"},"bashrc":{"code":"","color":"#4d5a5e"},"favicon":{"code":"","color":"#cbcb41"},"docker":{"code":"","color":"#519aba"},"gruntfile":{"code":"","color":"#e37933"},"gulpfile":{"code":"","color":"#cc3e44"},"dropbox":{"code":"","color":"#0061FE"},"license":{"code":"","color":"#cbcb41"},"procfile":{"code":"","color":"#a074c4"},"jquery":{"code":"","color":"#1B75BB"},"angular":{"code":"","color":"#E23237"},"backbone":{"code":"","color":"#0071B5"},"requirejs":{"code":"","color":"#F44A41"},"materialize":{"code":"","color":"#EE6E73"},"mootools":{"code":"","color":"#ECECEC"},"vagrant":{"code":"","color":"#1563FF"},"svg":{"code":"ﰟ","color":"#FFB13B"},"font":{"code":"","color":"#999999"},"text":{"code":"","color":"#999999"},"archive":{"code":"","color":"#cc3e44"}},"extensions":{"styl":"stylus","sass":"sass","scss":"sass","htm":"html","html":"html","slim":"html","xml":"xml","xaml":"xml","ejs":"ejs","css":"css","less":"css","md":"markdown","mdx":"markdown","markdown":"markdown","rmd":"markdown","json":"json","js":"javascript","es6":"javascript","jsx":"javascriptreact","rb":"ruby","ru":"ruby","php":"php","py":"python","pyc":"python","pyo":"python","pyd":"python","coffee":"coffee","mustache":"mustache","hbs":"mustache","config":"conf","conf":"conf","ini":"conf","yml":"conf","yaml":"conf","toml":"conf","jpg":"image","jpeg":"image","bmp":"image","png":"image","gif":"image","ico":"ico","twig":"twig","cpp":"c","c++":"c","cxx":"c","cc":"c","cp":"c","c":"c","h":"h","hpp":"h","hxx":"h","hs":"haskell","lhs":"haskell","lua":"lua","java":"java","jar":"java","sh":"terminal","fish":"terminal","bash":"terminal","zsh":"terminal","ksh":"terminal","csh":"terminal","awk":"terminal","ps1":"terminal","bat":"terminal","cmd":"terminal","ml":"ml","mli":"ml","diff":"diff","db":"sql","sql":"sql","dump":"sql","accdb":"sql","clj":"clojure","cljc":"clojure","cljs":"clojure","edn":"edn","scala":"scala","go":"go","dart":"dart","xul":"firefox","sln":"vs","suo":"vs","pl":"perl","pm":"perl","t":"perl","rss":"rss","f#":"fsharp","fsscript":"fsharp","fsx":"fsharp","fs":"fsharp","fsi":"fsharp","rs":"rust","rlib":"rust","d":"dlang","erl":"erlang","hrl":"erlang","ex":"elixir","exs":"elixir","exx":"elixir","leex":"elixir","vim":"vim","ai":"ai","psd":"psd","psb":"psd","ts":"typescript","tsx":"javascriptreact","jl":"julia","pp":"puppet","vue":"vue","swift":"swift","xcplayground":"swift","svg":"svg","otf":"font","ttf":"font","fnt":"font","txt":"text","text":"text","zip":"archive","tar":"archive","gz":"archive","gzip":"archive","rar":"archive","7z":"archive","iso":"archive","doc":"word","docx":"word","docm":"word","csv":"excel","xls":"excel","xlsx":"excel","xlsm":"excel","ppt":"ppt","pptx":"ppt","pptm":"ppt"},"filenames":{"gruntfile":"gruntfile","gulpfile":"gulpfile","gemfile":"ruby","guardfile":"ruby","capfile":"ruby","rakefile":"ruby","mix":"mix","dropbox":"dropbox","vimrc":"vim",".vimrc":"vim",".gvimrc":"vim","_vimrc":"vim","_gvimrc":"vim","license":"license","procfile":"procfile","Vagrantfile":"vagrant","docker-compose.yml":"docker",".gitconfig":"gitconfig",".gitignore":"gitconfig","webpack":"webpack",".bashrc":"bashrc",".zshrc":"bashrc",".bashprofile":"bashrc","favicon.ico":"favicon","dockerfile":"docker"},"patternMatches":{".*jquery.*.js$":"jquery",".*angular.*.js$":"angular",".*backbone.*.js$":"backbone",".*require.*.js$":"requirejs",".*materialize.*.js$":"materialize",".*materialize.*.css$":"materialize",".*mootools.*.js$":"mootools"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),o=n(7),s=n(2);let a=i.fileColumnManager.getColumnConfig("clip.copy"),c=i.fileColumnManager.getColumnConfig("clip.cut");o.enableNerdfont?(void 0===a&&(a=""),void 0===c&&(c="")):(void 0===a&&(a="C"),void 0===c&&(c="X"));const u=s.max([a.length,c.length])+1;a=a.padEnd(u," "),c=c.padEnd(u," ");const l=" ".repeat(u),d={clip:r.hlGroupManager.hlLinkGroupCommand("FileClip","Statement")};r.hlGroupManager.register(d),i.fileColumnManager.registerColumn("clip",e=>({draw(t,n){if(0===e.copyItems.size&&0===e.cutItems.size)return;const i=e.copyItems.has(n)?a:e.cutItems.has(n)?c:l;t.add(i,d.clip)}}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(80)),o=n(4),s=n(0),a={size:s.hlGroupManager.hlLinkGroupCommand("FileSize","Constant")};s.hlGroupManager.register(a),o.fileColumnManager.registerColumn("size",{draw(e,t){t.lstat?e.add(r.default(t.lstat.size).padStart(10),a.size):e.add(" ".repeat(10)),e.add(" ")}})},function(e,t,n){"use strict";const i=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],r=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],o=(e,t)=>{let n=e;return"string"==typeof t?n=e.toLocaleString(t):!0===t&&(n=e.toLocaleString()),n};e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t=Object.assign({bits:!1},t)).bits?r:i;if(t.signed&&0===e)return" 0 "+n[0];const s=e<0,a=s?"-":t.signed?"+":"";if(s&&(e=-e),e<1){return a+o(e,t.locale)+" "+n[0]}const c=Math.min(Math.floor(Math.log10(e)/3),n.length-1);return e=Number((e/Math.pow(1e3,c)).toPrecision(3)),a+o(e,t.locale)+" "+n[c]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),o=n(7),s={readonly:r.hlGroupManager.hlLinkGroupCommand("FileReadonly","Operator")};r.hlGroupManager.register(s),i.fileColumnManager.registerColumn("readonly",{draw(e,t){t.readonly&&(e.add(t.readonly?o.enableNerdfont?"":"RO":"",s.readonly),e.add(" "))}})},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(0),s=i(n(21)),a={time:o.hlGroupManager.hlLinkGroupCommand("TimeModified","Identifier")};o.hlGroupManager.register(a),r.fileColumnManager.registerColumn("modified",{draw(e,t){t.lstat?e.add(s.default(t.lstat.mtime).format("YY/MM/DD HH:mm:ss"),a.time):e.add("                 "),e.add(" ")}})},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(0),s=i(n(21)),a={time:o.hlGroupManager.hlLinkGroupCommand("TimeCreated","Identifier")};o.hlGroupManager.register(a),r.fileColumnManager.registerColumn("created",{draw(e,t){t.lstat?e.add(s.default(t.lstat.ctime).format("YY/MM/DD HH:mm:ss"),a.time):e.add("                 "),e.add(" ")}})},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(0),s=i(n(21)),a={time:o.hlGroupManager.hlLinkGroupCommand("TimeAccessed","Identifier")};o.hlGroupManager.register(a),r.fileColumnManager.registerColumn("accessed",{draw(e,t){t.lstat?e.add(s.default(t.lstat.atime).format("YY/MM/DD HH:mm:ss"),a.time):e.add("                 "),e.add(" ")}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),o=n(18),s=n(9),a=n(2),c=a.config.get("file.diagnosticCountMax");let u={},l=0;const d={error:r.hlGroupManager.hlLinkGroupCommand("FileDiagnosticError","CocErrorSign")};r.hlGroupManager.register(d),i.fileColumnManager.registerColumn("diagnosticError",e=>({load(){o.diagnosticManager.errorReload(e.root)},beforeDraw(){e.diagnosisLineIndexes=[],u={},Object.entries(o.diagnosticManager.errorMixedCount).forEach(([e,t])=>{u[e]=t>c?"●":t.toString()}),l=a.max(Object.values(u).map(e=>e.length))},draw(t,n){if(Object.keys(o.diagnosticManager.errorMixedCount).length>0){if(n.fullpath in o.diagnosticManager.errorMixedCount)if(n.directory&&s.expandStore.isExpanded(n.fullpath))t.add(" ".padStart(l),d.error);else{const i=u[n.fullpath];t.add(i.padStart(l),d.error),e.diagnosisLineIndexes.push(t.line)}else t.add(" ".repeat(l));t.add(" ")}}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),o=n(18),s=n(2),a=n(9),c={warning:r.hlGroupManager.hlLinkGroupCommand("FileDiagnosticWarning","CocWarningSign")};r.hlGroupManager.register(c);const u=s.config.get("file.diagnosticCountMax");let l={},d=0;i.fileColumnManager.registerColumn("diagnosticWarning",e=>({load(){o.diagnosticManager.warningReload(e.root)},beforeDraw(){e.diagnosisLineIndexes=[],l={},Object.entries(o.diagnosticManager.warningMixedCount).forEach(([e,t])=>{l[e]=t>u?"●":t.toString()}),d=s.max(Object.values(l).map(e=>e.length))},draw(t,n){if(Object.keys(l).length>0){if(n.fullpath in l)if(n.directory&&a.expandStore.isExpanded(n.fullpath))t.add(" ".padStart(d),c.warning);else{const i=l[n.fullpath];t.add(i.toString().padStart(d),c.warning),e.diagnosisLineIndexes.push(t.line)}else t.add(" ".repeat(d));t.add(" ")}}}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),o=n(1),s=n(29),a=i(n(13)),c=i(n(3)),u=i(n(88)),l=n(89),d=n(2);class f extends s.EventEmitter{constructor(){super(...arguments),this.processes=[]}start(e,t,n,i){let s=n.length;for(const d of n){const n=r.spawn(e,t,{cwd:d});this.processes.push(n),n.on("error",e=>{this.emit("error",e.message)});const f=u.default.createInterface(n.stdout),h=l.Range.create(0,0,0,0),p=i.length>0;n.stderr.on("data",e=>{console.error(e.toString("utf8"))}),f.on("line",e=>{const t=c.default.join(d,e);if(p&&i.some(e=>a.default(t,e)))return;const n=l.Location.create(o.Uri.file(t).toString(),h);this.emit("data",{label:e,location:n})}),f.on("close",()=>{0==(s-=1)&&this.emit("end")})}}dispose(){for(const e of this.processes)e.killed||e.kill()}}class h extends o.BasicList{constructor(e){super(e),this.name="explorerFiles",this.defaultAction="reveal",this.addLocationActions(),this.addAction("reveal",async e=>{const t=await this.convertLocation(e.location);this.revealCallback&&this.revealCallback(t)})}async getCommand(){const e=[];if(await d.executable("fd"))return e.push("--color","never"),this.ignore||e.push("--no-ignore"),this.recursive||e.push("--max-depth","1"),{cmd:"fd",args:e};if(d.isWindows)return e.push("/a-D","/B"),this.recursive&&e.push("/S"),{cmd:"dir",args:e};if(d.executable("find"))return e.push("."),this.recursive||e.push("-maxdepth","1"),{cmd:"find",args:e};throw new Error("Unable to find command for files list.")}async loadItems(e){if(!this.rootPath)return null;const t=await this.getCommand();if(!t)return null;const n=new f,i=this.getConfig().get("excludePatterns",[]);return n.start(t.cmd,t.args,[this.rootPath],i),n}}t.default=h,t.filesList=new h(o.workspace.nvim)},function(e,t){e.exports=require("readline")},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);t.ErrorCodes=r.ErrorCodes,t.ResponseError=r.ResponseError,t.CancellationToken=r.CancellationToken,t.CancellationTokenSource=r.CancellationTokenSource,t.Disposable=r.Disposable,t.Event=r.Event,t.Emitter=r.Emitter,t.Trace=r.Trace,t.TraceFormat=r.TraceFormat,t.SetTraceNotification=r.SetTraceNotification,t.LogTraceNotification=r.LogTraceNotification,t.RequestType=r.RequestType,t.RequestType0=r.RequestType0,t.NotificationType=r.NotificationType,t.NotificationType0=r.NotificationType0,t.MessageReader=r.MessageReader,t.MessageWriter=r.MessageWriter,t.ConnectionStrategy=r.ConnectionStrategy,t.StreamMessageReader=r.StreamMessageReader,t.StreamMessageWriter=r.StreamMessageWriter,t.IPCMessageReader=r.IPCMessageReader,t.IPCMessageWriter=r.IPCMessageWriter,t.createClientPipeTransport=r.createClientPipeTransport,t.createServerPipeTransport=r.createServerPipeTransport,t.generateRandomPipeName=r.generateRandomPipeName,t.createClientSocketTransport=r.createClientSocketTransport,t.createServerSocketTransport=r.createServerSocketTransport,i(n(96)),i(n(98)),t.createProtocolConnection=function(e,t,n,i){return r.createMessageConnection(e,t,n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12);var r;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(r=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=i.number(e)?e:r.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&i.string(t.method)&&(i.string(t.id)||i.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&i.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(i.string(t.id)||i.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(15),r=n(12);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||r.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(i=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=i.None){let r=this._map.get(e);if(r)r.value=t,n!==i.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===i.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(26),o=n(94),s=n(39),a=n(22),c=n(23);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:i.join(r.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,i=new Promise((e,t)=>{n=e});return new Promise((r,o)=>{let u=s.createServer(e=>{u.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",o),u.listen(e,()=>{u.removeListener("error",o),r({onConnected:()=>i})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(39),r=n(22),o=n(23);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((a,c)=>{let u=i.createServer(e=>{u.close(),n([new r.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",()=>{u.removeListener("error",c),a({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=i.createConnection(e,"127.0.0.1");return[new r.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},function(e,t,n){var i,r,o;!function(s){if("object"==typeof e.exports){var a=s(n(97),t);void 0!==a&&(e.exports=a)}else r=[n,t],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o)}((function(e,t){"use strict";var n,i,r,o,s,a,c,u,l,d,f,h,p;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return C.objectLiteral(t)&&C.number(t.line)&&C.number(t.character)}}(n=t.Position||(t.Position={})),function(e){e.create=function(e,t,i,r){if(C.number(e)&&C.number(t)&&C.number(i)&&C.number(r))return{start:n.create(e,t),end:n.create(i,r)};if(n.is(e)&&n.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+i+", "+r+"]")},e.is=function(e){var t=e;return C.objectLiteral(t)&&n.is(t.start)&&n.is(t.end)}}(i=t.Range||(t.Range={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return C.defined(t)&&i.is(t.range)&&(C.string(t.uri)||C.undefined(t.uri))}}(r=t.Location||(t.Location={})),function(e){e.create=function(e,t,n,i){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:i}},e.is=function(e){var t=e;return C.defined(t)&&i.is(t.targetRange)&&C.string(t.targetUri)&&(i.is(t.targetSelectionRange)||C.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||C.undefined(t.originSelectionRange))}}(t.LocationLink||(t.LocationLink={})),function(e){e.create=function(e,t,n,i){return{red:e,green:t,blue:n,alpha:i}},e.is=function(e){var t=e;return C.number(t.red)&&C.number(t.green)&&C.number(t.blue)&&C.number(t.alpha)}}(o=t.Color||(t.Color={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&o.is(t.color)}}(t.ColorInformation||(t.ColorInformation={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return C.string(t.label)&&(C.undefined(t.textEdit)||u.is(t))&&(C.undefined(t.additionalTextEdits)||C.typedArray(t.additionalTextEdits,u.is))}}(t.ColorPresentation||(t.ColorPresentation={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.create=function(e,t,n,i,r){var o={startLine:e,endLine:t};return C.defined(n)&&(o.startCharacter=n),C.defined(i)&&(o.endCharacter=i),C.defined(r)&&(o.kind=r),o},e.is=function(e){var t=e;return C.number(t.startLine)&&C.number(t.startLine)&&(C.undefined(t.startCharacter)||C.number(t.startCharacter))&&(C.undefined(t.endCharacter)||C.number(t.endCharacter))&&(C.undefined(t.kind)||C.string(t.kind))}}(t.FoldingRange||(t.FoldingRange={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return C.defined(t)&&r.is(t.location)&&C.string(t.message)}}(s=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(t.DiagnosticSeverity||(t.DiagnosticSeverity={})),function(e){e.create=function(e,t,n,i,r,o){var s={range:e,message:t};return C.defined(n)&&(s.severity=n),C.defined(i)&&(s.code=i),C.defined(r)&&(s.source=r),C.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return C.defined(t)&&i.is(t.range)&&C.string(t.message)&&(C.number(t.severity)||C.undefined(t.severity))&&(C.number(t.code)||C.string(t.code)||C.undefined(t.code))&&(C.string(t.source)||C.undefined(t.source))&&(C.undefined(t.relatedInformation)||C.typedArray(t.relatedInformation,s.is))}}(a=t.Diagnostic||(t.Diagnostic={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={title:e,command:t};return C.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){var t=e;return C.defined(t)&&C.string(t.title)&&C.string(t.command)}}(c=t.Command||(t.Command={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return C.objectLiteral(t)&&C.string(t.newText)&&i.is(t.range)}}(u=t.TextEdit||(t.TextEdit={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return C.defined(t)&&m.is(t.textDocument)&&Array.isArray(t.edits)}}(l=t.TextDocumentEdit||(t.TextDocumentEdit={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&C.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||C.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||C.boolean(t.options.ignoreIfExists)))}}(d=t.CreateFile||(t.CreateFile={})),function(e){e.create=function(e,t,n){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&C.string(t.oldUri)&&C.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||C.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||C.boolean(t.options.ignoreIfExists)))}}(f=t.RenameFile||(t.RenameFile={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&C.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||C.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||C.boolean(t.options.ignoreIfNotExists)))}}(h=t.DeleteFile||(t.DeleteFile={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return C.string(e.kind)?d.is(e)||f.is(e)||h.is(e):l.is(e)})))}}(p=t.WorkspaceEdit||(t.WorkspaceEdit={}));var m,g,y,v,w=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(u.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(u.replace(e,t))},e.prototype.delete=function(e){this.edits.push(u.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),b=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(l.is(e)){var n=new w(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var i=new w(e.changes[n]);t._textEditChanges[n]=i})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(m.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(i=this._textEditChanges[t.uri])){var n={textDocument:t,edits:r=[]};this._workspaceEdit.documentChanges.push(n),i=new w(r),this._textEditChanges[t.uri]=i}return i}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i;if(!(i=this._textEditChanges[e])){var r=[];this._workspaceEdit.changes[e]=r,i=new w(r),this._textEditChanges[e]=i}return i},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(d.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(f.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(h.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();t.WorkspaceChange=b,function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return C.defined(t)&&C.string(t.uri)}}(t.TextDocumentIdentifier||(t.TextDocumentIdentifier={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return C.defined(t)&&C.string(t.uri)&&(null===t.version||C.number(t.version))}}(m=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={})),function(e){e.create=function(e,t,n,i){return{uri:e,languageId:t,version:n,text:i}},e.is=function(e){var t=e;return C.defined(t)&&C.string(t.uri)&&C.string(t.languageId)&&C.number(t.version)&&C.string(t.text)}}(t.TextDocumentItem||(t.TextDocumentItem={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(g=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(g=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(e){var t=e;return C.objectLiteral(e)&&g.is(t.kind)&&C.string(t.value)}}(y=t.MarkupContent||(t.MarkupContent={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(t.CompletionItemKind||(t.CompletionItemKind={})),function(e){e.PlainText=1,e.Snippet=2}(t.InsertTextFormat||(t.InsertTextFormat={})),function(e){e.create=function(e){return{label:e}}}(t.CompletionItem||(t.CompletionItem={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(t.CompletionList||(t.CompletionList={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return C.string(t)||C.objectLiteral(t)&&C.string(t.language)&&C.string(t.value)}}(v=t.MarkedString||(t.MarkedString={})),function(e){e.is=function(e){var t=e;return!!t&&C.objectLiteral(t)&&(y.is(t.contents)||v.is(t.contents)||C.typedArray(t.contents,v.is))&&(void 0===e.range||i.is(e.range))}}(t.Hover||(t.Hover={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(t.ParameterInformation||(t.ParameterInformation={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={label:e};return C.defined(t)&&(r.documentation=t),C.defined(n)?r.parameters=n:r.parameters=[],r}}(t.SignatureInformation||(t.SignatureInformation={})),function(e){e.Text=1,e.Read=2,e.Write=3}(t.DocumentHighlightKind||(t.DocumentHighlightKind={})),function(e){e.create=function(e,t){var n={range:e};return C.number(t)&&(n.kind=t),n}}(t.DocumentHighlight||(t.DocumentHighlight={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(t.SymbolKind||(t.SymbolKind={})),function(e){e.create=function(e,t,n,i,r){var o={name:e,kind:t,location:{uri:i,range:n}};return r&&(o.containerName=r),o}}(t.SymbolInformation||(t.SymbolInformation={}));var x=function(){};t.DocumentSymbol=x,function(e){e.create=function(e,t,n,i,r,o){var s={name:e,detail:t,kind:n,range:i,selectionRange:r};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&C.string(t.name)&&C.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||C.string(t.detail))&&(void 0===t.deprecated||C.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(x=t.DocumentSymbol||(t.DocumentSymbol={})),t.DocumentSymbol=x,function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(t.CodeActionKind||(t.CodeActionKind={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return C.defined(t)&&C.typedArray(t.diagnostics,a.is)&&(void 0===t.only||C.typedArray(t.only,C.string))}}(t.CodeActionContext||(t.CodeActionContext={})),function(e){e.create=function(e,t,n){var i={title:e};return c.is(t)?i.command=t:i.edit=t,void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return t&&C.string(t.title)&&(void 0===t.diagnostics||C.typedArray(t.diagnostics,a.is))&&(void 0===t.kind||C.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||c.is(t.command))&&(void 0===t.edit||p.is(t.edit))}}(t.CodeAction||(t.CodeAction={})),function(e){e.create=function(e,t){var n={range:e};return C.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return C.defined(t)&&i.is(t.range)&&(C.undefined(t.command)||c.is(t.command))}}(t.CodeLens||(t.CodeLens={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return C.defined(t)&&C.number(t.tabSize)&&C.boolean(t.insertSpaces)}}(t.FormattingOptions||(t.FormattingOptions={}));var _=function(){};t.DocumentLink=_,function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return C.defined(t)&&i.is(t.range)&&(C.undefined(t.target)||C.string(t.target))}}(_=t.DocumentLink||(t.DocumentLink={})),t.DocumentLink=_,t.EOL=["\n","\r\n","\r"],function(e){e.create=function(e,t,n,i){return new E(e,t,n,i)},e.is=function(e){var t=e;return!!(C.defined(t)&&C.string(t.uri)&&(C.undefined(t.languageId)||C.string(t.languageId))&&C.number(t.lineCount)&&C.func(t.getText)&&C.func(t.positionAt)&&C.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),i=function e(t,n){if(t.length<=1)return t;var i=t.length/2|0;var r=t.slice(0,i);var o=t.slice(i);e(r,n);e(o,n);var s=0;var a=0;var c=0;for(;s<r.length&&a<o.length;){var u=n(r[s],o[a]);t[c++]=u<=0?r[s++]:o[a++]}for(;s<r.length;)t[c++]=r[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),r=n.length,o=i.length-1;o>=0;o--){var s=i[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=r))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),r=a}return n}}(t.TextDocument||(t.TextDocument={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var C,E=function(){function e(e,t,n,i){this._uri=e,this._languageId=t,this._version=n,this._content=i,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,i=0;i<t.length;i++){n&&(e.push(i),n=!1);var r=t.charAt(i);n="\r"===r||"\n"===r,"\r"===r&&i+1<t.length&&"\n"===t.charAt(i+1)&&i++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),i=0,r=t.length;if(0===r)return n.create(0,e);for(;i<r;){var o=Math.floor((i+r)/2);t[o]>e?r=o:i=o+1}var s=i-1;return n.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(C||(C={}))}))},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=97},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(99),r=n(8),o=n(100);t.ImplementationRequest=o.ImplementationRequest;const s=n(101);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(102);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const c=n(103);t.ConfigurationRequest=c.ConfigurationRequest;const u=n(104);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const l=n(105);t.FoldingRangeRequest=l.FoldingRangeRequest;const d=n(106);t.DeclarationRequest=d.DeclarationRequest,function(e){e.is=function(e){let t=e;return i.string(t.language)||i.string(t.scheme)||i.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new r.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new r.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new r.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new r.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new r.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new r.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new r.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new r.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new r.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new r.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new r.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new r.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new r.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new r.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new r.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new r.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new r.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new r.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new r.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new r.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new r.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new r.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new r.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new r.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new r.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new r.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new r.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new r.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new r.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new r.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new r.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new r.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new r.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new r.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new r.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new r.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new r.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new r.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new r.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function i(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new i.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new i.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);!function(e){e.type=new i.RequestType("textDocument/declaration")}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=i(n(3)),s=n(2),a=n(1),c=i(n(108)),u=n(109),l=n(19),d=async e=>{if(await s.fsExists(e))throw new Error(`Target file or directory ${e} already exists`)};t.initFileActions=function(e){const{nvim:t}=e;e.addAction("toggleHidden",async()=>{e.showHiddenFiles=!e.showHiddenFiles},"toggle visibility of hidden files",{render:!0,multi:!1}),e.addAction("gotoParent",async()=>{e.root=o.default.dirname(e.root),r.expandStore.expand(e.root),await e.reload(null)},"change directory to parent directory",{multi:!1}),e.addRootAction("expand",async()=>{r.expandStore.expand(e.root),await e.reload(null)},"expand root node"),e.addRootAction("expandRecursive",async()=>{r.expandStore.expand(e.root),await e.reload(null,{render:!1}),await e.expandRecursiveItems(e.items)},"expand root node recursively"),e.addRootAction("shrink",async()=>{r.expandStore.shrink(e.root),await e.reload(null),await e.gotoRoot()},"shrink root node"),e.addRootAction("shrinkRecursive",async()=>{r.expandStore.shrink(e.root),await e.shrinkRecursiveItems(e.items),await e.render(),await e.gotoRoot()},"shrink root node recursively"),e.addItemAction("cd",async t=>{t.directory&&(e.root=t.fullpath,r.expandStore.expand(e.root),await e.reload(t))},"change directory to current node",{multi:!1}),e.addItemAction("open",async n=>{if(n.directory)await e.doAction("cd",n);else if("vsplit"===s.openStrategy)await e.doAction("openInVsplit",n),await e.quitOnOpen();else if("select"===s.openStrategy)await e.explorer.selectWindowsUI(async i=>{await s.avoidOnBufEnter(async()=>{await e.nvim.command(`${i}wincmd w`)}),await t.command(`edit ${n.fullpath}`),await e.quitOnOpen()},async()=>{await e.doAction("openInVsplit",n),await e.quitOnOpen()});else if("previousBuffer"===s.openStrategy){const i=await e.prevWinnr();i?(await s.avoidOnBufEnter(async()=>{await t.command(`${i}wincmd w`)}),await t.command(`edit ${n.fullpath}`)):await e.doAction("openInVsplit",n),await e.quitOnOpen()}},"open file or directory",{multi:!1}),e.addItemAction("openInSplit",async n=>{n.directory||(await t.command(`split ${n.fullpath}`),await e.quitOnOpen())},"open file via split command"),e.addItemAction("openInVsplit",async n=>{n.directory||await s.execNotifyBlock(async()=>{t.command(`vsplit ${n.fullpath}`,!0),"left"===e.explorer.args.position?t.command("wincmd L",!0):"right"===e.explorer.args.position&&t.command("wincmd H",!0),await e.quitOnOpen()})},"open file via vsplit command"),e.addItemAction("openInTab",async n=>{n.directory||(await e.quitOnOpen(),await t.command(`tabedit ${n.fullpath}`))},"open file in tab"),e.addItemAction("drop",async n=>{n.directory?await e.doAction("expand",n):(await t.command(`drop ${n.fullpath}`),await e.quitOnOpen())},"open file via drop command"),e.addItemAction("expand",async t=>{if(t.directory){const n=async t=>{r.expandStore.expand(t.fullpath),t.children||(t.children=await e.listFiles(t.fullpath,t)),1===t.children.length&&t.children[0].directory&&s.config.get("file.autoExpandSingleDirectory")&&await n(t.children[0])};await n(t),await e.render()}else await e.doAction("open",t)},"expand directory or open file"),e.addItemAction("expandRecursive",async t=>{await e.expandRecursiveItems([t]),await e.render()},"expand directory recursively"),e.addItemAction("shrink",async t=>{t.directory&&r.expandStore.isExpanded(t.fullpath)?(r.expandStore.shrink(t.fullpath),await e.render()):t.parent?(r.expandStore.shrink(t.parent.fullpath),await s.execNotifyBlock(async()=>{await e.render({notify:!0}),await e.gotoItem(t.parent,{notify:!0})})):await e.doRootAction("shrink")},"shrink directory"),e.addItemAction("shrinkRecursive",async t=>{t.directory&&r.expandStore.isExpanded(t.fullpath)?await e.shrinkRecursiveItems([t]):t.parent?(r.expandStore.shrink(t.parent.fullpath),t.parent.children&&await e.shrinkRecursiveItems(t.parent.children),await e.gotoItem(t.parent)):await e.doRootAction("shrinkRecursive"),await e.render()},"shrink directory recursively"),e.addItemAction("expandOrShrink",async t=>{t.directory&&(r.expandStore.isExpanded(t.fullpath)?await e.doAction("shrink",t):await e.doAction("expand",t))},"expand or shrink directory"),e.addAction("copyFilepath",async t=>{await e.copy(t?t.map(e=>e.fullpath).join("\n"):e.root),a.workspace.showMessage("Copy filepath to clipboard")},"copy full filepath to clipboard"),e.addAction("copyFilename",async t=>{await e.copy(t?t.map(e=>e.name).join("\n"):o.default.basename(e.root)),a.workspace.showMessage("Copy filename to clipboard")},"copy filename to clipboard"),e.addItemsAction("copyFile",async t=>{e.copyItems.clear(),e.cutItems.clear(),t.forEach(t=>{e.copyItems.add(t)})},"copy file for paste",{render:!0}),e.addItemsAction("cutFile",async t=>{e.copyItems.clear(),e.cutItems.clear(),t.forEach(t=>{e.cutItems.add(t)})},"cut file for paste",{render:!0}),e.addItemAction("pasteFile",async n=>{const i=e.getPutTargetDir(n),r=async(n,r)=>{let a=!1;for(const c of Array.from(n)){if(a)break;let n=o.default.join(i,c.name);for(;;){if(!await s.fsExists(n)){await r(c,n),await e.reload(null);break}{const i=await e.explorer.prompt(`${n} already exists. Skip?`,["rename","skip","cancel"]);if("skip"===i)break;if("cancel"===i){a=!0;break}if("rename"===i){n=await t.call("input",[`Rename: ${n} -> `,n,"file"]);continue}}}}};e.copyItems.size>0?(await r(e.copyItems,async(e,t)=>{await s.copyFileOrDirectory(e.fullpath,t)}),e.copyItems.clear(),await e.render()):e.cutItems.size>0?(await r(e.cutItems,async(e,t)=>{await s.fsRename(e.fullpath,t)}),e.cutItems.clear(),await e.render()):a.workspace.showMessage("Copy items or cut items is empty","error")},"paste files to here",{multi:!1}),e.addItemsAction("delete",async t=>{const n=t.map(e=>e.fullpath).join("\n");"yes"===await e.explorer.prompt("Move these files or directories to trash?\n"+n)&&await s.fsTrash(t.map(e=>e.fullpath))},"move file or directory to trash",{reload:!0}),e.addItemsAction("deleteForever",async t=>{const n=t.map(e=>e.fullpath).join("\n");if("yes"===await e.explorer.prompt("Forever delete these files or directories?\n"+n))for(const e of t)await s.fsRimraf(e.fullpath)},"delete file or directory forever",{reload:!0}),e.addAction("addFile",async n=>{let i=await t.call("input",["Input a new filename: ","","file"]);if(!(i=i.trim()))return;const r=o.default.join(e.getPutTargetDir(n?n[0]:null),i);await d(r),await s.fsMkdir(o.default.dirname(r),{recursive:!0}),await s.fsTouch(r),await e.reload(null);const a=await e.revealItemByPath(r);a&&await e.gotoItem(a)},"add a new file",{multi:!1}),e.addAction("addDirectory",async n=>{let i=await t.call("input",["Input a new directory name: ","","file"]);if(!(i=i.trim()))return;const r=o.default.join(e.getPutTargetDir(n?n[0]:null),i);await d(r),await s.fsMkdir(r,{recursive:!0}),await e.reload(null);const a=await e.revealItemByPath(r);a&&await e.gotoItem(a)},"add a new directory",{multi:!1}),e.addItemAction("rename",async n=>{const i=await t.call("input",[`Rename: ${n.fullpath} ->`,n.fullpath,"file"]);0!=i.length&&(await d(i),await s.fsMkdir(o.default.dirname(i),{recursive:!0}),await s.fsRename(n.fullpath,i),await e.reload(null))},"rename a file or directory",{multi:!1}),e.addAction("systemExecute",async t=>{t?await Promise.all(t.map(e=>c.default(e.fullpath))):await c.default(e.root)},"use system application open file or directory",{multi:!0}),s.isWindows&&e.addAction("listDrive",async()=>{const t=await s.listDrive();u.driveList.setExplorerDrives(t.map(t=>({name:t,callback:async t=>{e.root=t+"\\",r.expandStore.expand(e.root),await e.reload(null)}})));const n=a.listManager.registerList(u.driveList);await a.listManager.start(["--normal","--number-select",u.driveList.name]),n.dispose()},"list drives",{multi:!1}),e.addAction("search",async t=>{await e.searchByCocList(t?o.default.dirname(t[0].fullpath):e.root,!1)},"search by coc-list",{multi:!1}),e.addAction("searchRecursive",async t=>{await e.searchByCocList(t?o.default.dirname(t[0].fullpath):e.root,!0)},"search by coc-list recursively",{multi:!1}),e.addItemsAction("gitStage",async t=>{await l.gitManager.cmd.stage(...t.map(e=>e.fullpath)),await e.reload(null)},"add file to git index"),e.addItemsAction("gitUnstage",async t=>{await l.gitManager.cmd.unstage(...t.map(e=>e.fullpath)),await e.reload(null)},"reset file from git index")}},function(e,t){e.exports=require("open")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(6);class o extends i.BasicList{constructor(e){super(e),this.defaultAction="do",this.name="explorerDrives",this.explorerDrives=[],this.addAction("do",async e=>{await e.data.callback(e.data.drive)})}setExplorerDrives(e){this.explorerDrives=e}async loadItems(){return this.explorerDrives.map(e=>({label:`${e.name} - go to ${e.name}/`,data:{drive:e.name,callback:e.callback}}))}doHighlight(){const{nvim:e}=this;e.pauseNotification(),e.command("syntax match CocExplorerDriveName /\\v^[\\w:]+/",!0),e.command("syntax match CocExplorerDriveDescription /\\v - .+/",!0),e.command("highlight default link CocExplorerDriveName PreProc",!0),e.command("highlight default link CocExplorerDriveDescription Comment",!0),e.resumeNotification().catch(r.onError)}}t.DriveList=o,t.driveList=new o(i.workspace.nvim)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(111),n(112),n(113),n(114),n(115),n(116),n(117)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(7);i.bufferColumnManager.registerColumn("selection",e=>({draw(t,n){e.isSelectedAny()&&(t.add(e.isSelectedItem(n)?r.sourceIcons.selected:r.sourceIcons.unselected),t.add(" "))}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(10),o={nameVisible:i.hlGroupManager.hlLinkGroupCommand("BufferNameVisible","String")};i.hlGroupManager.register(o),r.bufferColumnManager.registerColumn("name",{draw(e,t){t.visible?e.add(t.basename,o.nameVisible):e.add(t.basename),e.add(" ")}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(0),o={bufname:r.hlGroupManager.hlLinkGroupCommand("BufferBufname","Comment")};r.hlGroupManager.register(o),i.bufferColumnManager.registerColumn("bufname",{draw(e,t){t.basename!==t.bufname&&(e.add(t.bufname,o.bufname),e.add(" "))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(0),o={modified:r.hlGroupManager.hlLinkGroupCommand("BufferModified","Operator")};r.hlGroupManager.register(o),i.bufferColumnManager.registerColumn("modified",{draw(e,t){e.add(t.modified?"+":t.modifiable?"":"-",o.modified),e.add(" ")}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(0),o=n(2),s={bufnr:r.hlGroupManager.hlLinkGroupCommand("BufferBufnr","Special")};r.hlGroupManager.register(s);let a=0;i.bufferColumnManager.registerColumn("bufnr",e=>({beforeDraw(){a=o.max(e.items.map(e=>e.bufnrStr.length))},draw(e,t){e.add(t.bufnrStr.padStart(a),s.bufnr),e.add(" ")}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(0),o=n(7),s={readonly:r.hlGroupManager.hlLinkGroupCommand("BufferReadonly","Operator")};r.hlGroupManager.register(s),i.bufferColumnManager.registerColumn("readonly",{draw(e,t){t.readonly&&(e.add(t.readonly?o.enableNerdfont?"":"RO":"",s.readonly),e.add(" "))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(0),o={fullpath:r.hlGroupManager.hlLinkGroupCommand("BufferFullpath","Comment")};r.hlGroupManager.register(o),i.bufferColumnManager.registerColumn("fullpath",{draw(e,t){t.basename!==t.bufname&&(e.add(t.fullpath,o.fullpath),e.add(" "))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);t.initBufferActions=function(e){const{nvim:t}=e;e.addAction("toggleHidden",async()=>{e.showHiddenBuffers=!e.showHiddenBuffers},"toggle visibility of unlisted buffers",{reload:!0}),e.addAction("shrink",async()=>{e.expanded=!1,await e.reload(null),await e.gotoRoot()},"shrink root node"),e.addRootAction("expand",async()=>{e.expanded=!0,await e.reload(null)},"expand root node"),e.addItemsAction("expand",async t=>{await e.doAction("open",t)},"open buffer"),e.addItemAction("open",async n=>{if("vsplit"===i.openStrategy)await e.doAction("openInVsplit",n),await e.quitOnOpen();else if("select"===i.openStrategy)await e.explorer.selectWindowsUI(async r=>{await i.avoidOnBufEnter(async()=>{await e.nvim.command(`${r}wincmd w`)}),await t.command(`buffer ${n.bufnr}`),await e.quitOnOpen()},async()=>{await e.doAction("openInVsplit",n),await e.quitOnOpen()});else if("previousBuffer"===i.openStrategy){const r=await e.prevWinnr();r?(await i.avoidOnBufEnter(async()=>{await t.command(`${r}wincmd w`)}),await t.command(`buffer ${n.bufnr}`)):await e.doAction("openInVsplit",n),await e.quitOnOpen()}},"open buffer",{multi:!1}),e.addItemAction("drop",async n=>{if(!n.hidden){const i=await t.call("getbufinfo",n.bufnr);if(i.length&&i[0].windows.length){const n=i[0].windows[0];return await t.call("win_gotoid",n),void await e.quitOnOpen()}}await t.command(`buffer ${n.bufnr}`),await e.quitOnOpen()},"open buffer via drop command",{multi:!1}),e.addItemAction("openInTab",async n=>{await e.quitOnOpen();const i=await t.call("fnameescape",n.bufname);await t.command(`tabe ${i}`)},"open buffer via tab"),e.addItemAction("openInSplit",async n=>{await t.command(`sbuffer ${n.bufnr}`),await e.quitOnOpen()},"open buffer via split command"),e.addItemAction("openInVsplit",async n=>{await i.execNotifyBlock(async()=>{t.command(`vertical sbuffer ${n.bufnr}`,!0),"left"===e.explorer.args.position?t.command("wincmd L",!0):"right"===e.explorer.args.position&&t.command("wincmd H",!0),await e.quitOnOpen()})},"open buffer via vsplit command"),e.addItemAction("delete",async e=>{await t.command(`bdelete ${e.bufnr}`)},"delete buffer",{reload:!0}),e.addItemAction("deleteForever",async e=>{await t.command(`bwipeout ${e.bufnr}`)},"bwipeout buffer",{reload:!0})}}]));